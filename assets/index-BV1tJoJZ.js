var e=Object.defineProperty,t=(t,s,i)=>((t,s,i)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[s]=i)(t,"symbol"!=typeof s?s+"":s,i);import{r as s}from"./phaser-DJe_tbjO.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var i=s();class a extends i.Scene{constructor(){super("Boot")}preload(){}create(){this.scene.start("Preloader"),this.scale.on("resize",this.resize,this)}resize(e){e.width,e.height}}class r{static collectCoin(e){this.coin+=e,this.maxCoin+=e,localStorage.setItem("coin",String(this.maxCoin))}static init(){this.maxCoin=Number(localStorage.getItem("coin"))??0,this.maxScore=Number(localStorage.getItem("score"))??0}static setHighScore(){this.maxScore=this.score,localStorage.setItem("score",String(this.score))}static payCoin(e){this.maxCoin-=e,localStorage.setItem("coin",String(this.maxCoin))}}t(r,"speed",300),t(r,"coin",0),t(r,"maxCoin"),t(r,"score",0),t(r,"maxScore",0);const h={SPLASH:{KEY:"splash",PATH:"assets/Splash/loading_screen.png"},SHADOW:{KEY:"shadow",PATH:"assets/Characters/effect_shadow.png"},BULLET:{KEY:"bullet",PATH:"assets/Characters/Effects/effect_smgbullet.png"},BULLETSHELL:{KEY:"bulletshell",PATH:"assets/Characters/Effects/shell.png"},AQUARIUM:{KEY:"aquarium",PATH:"assets/atlas/aquarium_assets.png"},HALL:{KEY:"hall",PATH:"assets/atlas/warehouse_assets.png"},ROOM1:{KEY:"room1",PATH:"assets/Levels/Room1/room1_1.png"},JETLOGO:{KEY:"jetlogo",PATH:"assets/Levels/Title/Objects/title_small.png"},CONTAINER_EDGE:{KEY:"containerEdge",PATH:"assets/UI/container/edge.png"},CONTAINER_FILLER:{KEY:"containerFiller",PATH:"assets/UI/container/filler.png"},CONTAINER_LEFT:{KEY:"containerLeft",PATH:"assets/UI/container/left.png"},CONTAINER_TOP:{KEY:"containerTop",PATH:"assets/UI/container/top.png"},REVIVE:{KEY:"revive",PATH:"assets/new/reviveIcon_TVOS.png"},BOOSTER:{KEY:"booster",PATH:"assets/new/skip.png"},GS_HEAD:{KEY:"gs_head",PATH:"assets/new_feature/fragment gravity suit/gs_head.png"},GS_BODY:{KEY:"gs_body",PATH:"assets/new_feature/fragment gravity suit/gs_body.png"},GS_FRAG1:{KEY:"gs_frag1",PATH:"assets/new_feature/fragment gravity suit/gravitysuitfrag1.png"},GS_FRAG2:{KEY:"gs_frag2",PATH:"assets/new_feature/fragment gravity suit/gravitysuitfrag2.png"},GS_FRAG3:{KEY:"gs_frag3",PATH:"assets/new_feature/fragment gravity suit/gravitysuitfrag3.png"},GS_FRAG4:{KEY:"gs_frag4",PATH:"assets/new_feature/fragment gravity suit/gravitysuitfrag4.png"},GS_FRAG5:{KEY:"gs_frag5",PATH:"assets/new_feature/fragment gravity suit/gravitysuitfrag5.png"},GS_FRAG6:{KEY:"gs_frag6",PATH:"assets/new_feature/fragment gravity suit/gravitysuitfrag6.png"},LAZER_WARNING:{KEY:"lazerwarning",PATH:"assets/Obstacles/Laser/laserWarning.png"},DUST:{KEY:"dust",PATH:"assets/particles/dust.png"}},n={PLAYER_BODY:{KEY:"player_body",PATH:"assets/Characters/Barry/defaultBody.png",FRAME_W:32,FRAME_H:32},WORKER_BODY:{KEY:"worker_body",PATH:"assets/workers/worker1Body.png",FRAME_W:32,FRAME_H:32},PLAYER_HEAD:{KEY:"player_head",PATH:"assets/Characters/Barry/defaultHead.png",FRAME_W:32,FRAME_H:32},WORKER_HEAD:{KEY:"worker_head",PATH:"assets/workers/worker1Head.png",FRAME_W:32,FRAME_H:32},PLAYER_JETPACK:{KEY:"player_jetpack",PATH:"assets/Characters/Jetpacks/jetpackDefault.png",FRAME_W:32,FRAME_H:44},JET_FX:{KEY:"jet_fx",PATH:"assets/Characters/Effects/jetfx.png",FRAME_W:64,FRAME_H:64},BULLET_FX:{KEY:"bullet_fx",PATH:"assets/Characters/Effects/bulletfx.png",FRAME_W:64,FRAME_H:64},COIN:{KEY:"coin",PATH:"assets/Entities/coin_sheet.png",FRAME_W:32,FRAME_H:32},BIG_COIN:{KEY:"bigcoin",PATH:"assets/new_feature/coinAlt.png",FRAME_W:32,FRAME_H:32},ELEC_ON:{KEY:"elecOn",PATH:"assets/Obstacles/Zapper/orbAnim.png",FRAME_W:62,FRAME_H:42},ELEC_ON_GLOW:{KEY:"elecOnGlow",PATH:"assets/Obstacles/Zapper/RegularZappers/glow.png",FRAME_W:128,FRAME_H:128},ZAP_FX:{KEY:"zapFX",PATH:"assets/Obstacles/Zapper/RegularZappers/zapEffect.png",FRAME_W:32,FRAME_H:117},ROCKET:{KEY:"rocket",PATH:"assets/Obstacles/Missile/missile.png",FRAME_W:32,FRAME_H:32},WARNING:{KEY:"warning",PATH:"assets/Obstacles/Missile/missileAlert.png",FRAME_W:64,FRAME_H:64},EXPLOSION:{KEY:"explosion",PATH:"assets/Obstacles/Missile/missileExplosion.png",FRAME_W:64,FRAME_H:64},UPGRADE:{KEY:"upgrade",PATH:"assets/Pickup/pickup.png",FRAME_W:128,FRAME_H:128},GRAVITY_SUIT:{KEY:"gravitysuit",PATH:"assets/new_feature/vehicleGravitysuit.png",FRAME_W:42,FRAME_H:42},ROCKET_FIRE:{KEY:"rocketfire",PATH:"assets/Obstacles/Missile/missileEffects.png",FRAME_W:64,FRAME_H:64},SPEEDUP:{KEY:"speedup",PATH:"assets/new/spdup.png",FRAME_W:128,FRAME_H:128},LAZER_HEAD:{KEY:"lazerhead",PATH:"assets/Obstacles/Laser/laser.png",FRAME_W:128,FRAME_H:128},LASER:{KEY:"laser",PATH:"assets/Obstacles/Laser/laserPower.png",FRAME_W:64,FRAME_H:64}},l={SHOOTING:{KEY:"shooting",PATH:"assets/SFX/Jetpack/jetpack_fireLP.mp3"},STOP_SHOOTING:{KEY:"stopshooting",PATH:"assets/SFX/Jetpack/Jetpack_stop.mp3"},PLAYING_BGM:{KEY:"playingBGM",PATH:"assets/BGM/Music_Level.mp3"},MENU_BGM:{KEY:"menuBGM",PATH:"assets/BGM/Music_Menu.mp3"},POWERUP:{KEY:"powerup",PATH:"assets/SFX/Effects/game.mp3"},COINSOUND:{KEY:"coinsound",PATH:"assets/SFX/Obstacle/Coin/coin_pickup_1.mp3"},SMASH:{KEY:"smash",PATH:"assets/SFX/Environtment/window_smash.mp3"},PLAYER_ELEC:{KEY:"playerelec",PATH:"assets/SFX/Barry/Player_bones.mp3"},PLAYER_HURT:{KEY:"playerhurt",PATH:"assets/SFX/Barry/Player_hurt_2.mp3"},HEADSTART_START:{KEY:"headstart_start",PATH:"assets/new/audio/headstart_start.mp3"},HEADSTART_STOP:{KEY:"headstart_stop",PATH:"assets/new/audio/headstart_stop.mp3"},HEADSTART_MID:{KEY:"headstart_mid",PATH:"assets/new/audio/headstart_build.mp3"},HEADSTART_LOOP:{KEY:"headstart_lp",PATH:"assets/new/audio/headstart_lp.mp3"},ROCKET_WARNING:{KEY:"rocketwarning",PATH:"assets/SFX/Obstacle/Missile/missile_warning.mp3"},ROCKET_LAUNCH:{KEY:"rocketlaunch",PATH:"assets/SFX/Obstacle/Missile/missile_launch.mp3"},ROCKET_EXPLODE:{KEY:"rocketexplode",PATH:"assets/SFX/Obstacle/Missile/rocket_explode_1.mp3"},HIT:{KEY:"hit",PATH:"assets/new/audio/pickupShieldHit.mp3"},RUN_1:{KEY:"run_1",PATH:"assets/SFX/Barry/run_metal_left_1.mp3"},RUN_2:{KEY:"run_2",PATH:"assets/SFX/Barry/run_metal_left_2.mp3"},RUN_3:{KEY:"run_3",PATH:"assets/SFX/Barry/run_metal_left_3.mp3"},RUN_4:{KEY:"run_4",PATH:"assets/SFX/Barry/run_metal_left_4.mp3"}},o={COIN1:{KEY:"coin1",PATH:"assets/tile/coin1.json"}},c={AQUARIUM:{KEY:"aquarium_map",PATH:"assets/tile/aquariumtile.json"},HALL:{KEY:"hall_map",PATH:"assets/tile/hall.json"},ROOM1:{KEY:"room1_map",PATH:"assets/tile/window.json"}};class d{constructor(e){t(this,"scene"),t(this,"map"),t(this,"maplayer"),t(this,"mapBG"),t(this,"mapBody"),t(this,"bgBody"),this.scene=e,this.map=this.scene.make.tilemap({key:c.AQUARIUM.KEY,tileHeight:256,tileWidth:256});const s=this.map.addTilesetImage("aquarium_assets",h.AQUARIUM.KEY);this.mapBG=this.map.createLayer("water",s,0,0),this.maplayer=this.map.createLayer("tube",s,0,0),this.mapBG.setScale(1,2),this.scene.physics.add.existing(this.maplayer),this.mapBody=this.maplayer.body,this.mapBody.setAllowGravity(!1),this.scene.physics.add.existing(this.mapBG),this.bgBody=this.mapBG.body,this.bgBody.setAllowGravity(!1)}update(e,t){this.mapBody.setVelocityX(-r.speed),this.bgBody.setVelocityX(-r.speed)}moveTo(e){this.maplayer.x=e,this.mapBG.x=e}}class p{constructor(e){t(this,"scene"),t(this,"map"),t(this,"maplayer"),t(this,"mapBG"),t(this,"mapBody"),t(this,"bgBody"),this.scene=e,this.map=this.scene.make.tilemap({key:"hall_map",tileHeight:256,tileWidth:256});const s=this.map.addTilesetImage("warehouse_assets",h.HALL.KEY);this.mapBG=this.map.createLayer("back",s,0,0),this.maplayer=this.map.createLayer("front",s,0,0),this.mapBG.setScale(1,2),this.scene.physics.add.existing(this.maplayer),this.mapBody=this.maplayer.body,this.mapBody.setAllowGravity(!1),this.scene.physics.add.existing(this.mapBG),this.bgBody=this.mapBG.body,this.bgBody.setAllowGravity(!1)}update(e,t){this.mapBody.setVelocityX(-r.speed),this.bgBody.setVelocityX(-r.speed)}moveTo(e){this.maplayer.x=e,this.mapBG.x=e}}class y{constructor(e){t(this,"scene"),t(this,"map"),t(this,"maplayer"),t(this,"mapBG"),t(this,"mapBody"),this.scene=e,this.map=this.scene.make.tilemap({key:"room1_map",tileHeight:256,tileWidth:256});const s=this.map.addTilesetImage("room1_1",h.ROOM1.KEY);this.maplayer=this.map.createLayer("front",s,0,0),this.maplayer.y=-256,this.maplayer.x=-256,this.scene.physics.add.existing(this.maplayer),this.mapBody=this.maplayer.body,this.mapBody.setAllowGravity(!1)}update(e,t){this.mapBody.setVelocityX(-r.speed)}moveTo(e){this.maplayer.x=e}}class u{constructor(e){t(this,"BGList"),t(this,"BeginBG"),t(this,"currentBG"),t(this,"prevBG"),t(this,"curr"),this.BGList=[],this.BGList.push(new d(e)),this.BGList.push(new p(e)),this.BGList.push(new y(e)),this.BeginBG=new y(e),this.currentBG=this.BeginBG,this.curr=-1,this.BGList.forEach(e=>{e.moveTo(3e5)})}maintain(){var e,t,s,i;r.speed>1500&&this.currentBG.maplayer.x>0&&this.prevBG&&this.currentBG.moveTo(this.prevBG.maplayer.x+4846),this.currentBG.maplayer.setDepth(-10),null==(e=this.currentBG.mapBG)||e.setDepth(-19),null==(t=this.prevBG)||t.maplayer.setDepth(-9),null==(i=null==(s=this.prevBG)?void 0:s.mapBG)||i.setDepth(-20)}update(e,t){null!=this.prevBG&&this.prevBG.update(e,t),this.currentBG.update(e,t),this.currentBG.maplayer.x<=-3e3&&(this.curr=(this.curr+1)%3,this.prevBG=this.currentBG,this.currentBG=this.BGList[this.curr],this.currentBG.moveTo(this.prevBG.maplayer.x+4846)),this.maintain()}rest(){this.BeginBG.moveTo(-256),this.currentBG=this.BeginBG,this.curr=-1,this.prevBG=null,this.BGList.forEach(e=>{e.moveTo(-1e4)})}}class g{static createAnim(e,t,s,i,a,r=12,h=!0,n=-1){e.anims.get(t)||e.anims.create({key:t,frames:e.anims.generateFrameNumbers(s,{start:i,end:a}),frameRate:r,repeat:h?n:0})}static play(e,t,s){if(e.anims.play(t,!0),!s)return;const i=e.anims.currentAnim;if(i&&s>=0&&s<i.frames.length){const t=i.frames[s];e.anims.setCurrentFrame(t)}}static playAnim(e,t,s){e.list.forEach(s=>{e.scene.anims.get(t+"_"+s.name)&&g.play(s,t+"_"+s.name)}),s&&e.list[0].once("animationcomplete-"+t+"_head",()=>s())}}class m extends Phaser.Physics.Arcade.Sprite{constructor(e,s,i,a){var h;super(e,s,i,a),t(this,"speed"),this.scene.physics.add.existing(this),this.scene.add.existing(this),null==(h=this.body)||h.setImmovable(!0).setAllowGravity(!1),this.speed=r.speed}}class E extends m{constructor(e,s,i,a){super(e,s,i,a),t(this,"flipped",!1),t(this,"using",!1),t(this,"point",1),t(this,"coinsound"),this.CoinAnimInit(),this.coinsound=this.scene.sound.add(l.COINSOUND.KEY),e.physics.add.overlap(this,e.player,()=>{r.collectCoin(this.point),this.kill(),this.coinsound.isPlaying||this.coinsound.play()})}update(){this.active&&(this.move(),!this.flipped&&this.x<=1e3&&this.using&&(g.play(this,"coin_flip"),this.flipped=!0),this.x<=-20&&this.kill())}move(){this.setVelocityX(-this.speed)}CoinAnimInit(){g.createAnim(this.scene,"coin_flip",n.COIN.KEY,0,7,12,!1)}moveTo(e,t){this.x=e,this.y=t}kill(){var e;this.using=!1,this.flipped=!1,null==(e=this.body)||e.stop(),this.setVelocity(0),this.disableBody(!0,!0)}reuse(e,t){this.speed=r.speed,this.moveTo(e,t),this.flipped=!1,this.using=!0,this.setActive(!0).setVisible(!0),this.enableBody(!0,e,t,!0,!0),this.move()}}class A extends E{constructor(e,t,s,i){super(e,t,s,i),this.bigCoinAnimInit(),this.point=2}update(){this.visible&&(g.play(this,"big_coin_flip"),this.flipped=!0,this.x<=-20&&this.kill())}bigCoinAnimInit(){g.createAnim(this.scene,"big_coin_flip",n.BIG_COIN.KEY,0,7)}}const b=[{data:[1,1,1,1,0,9,0,9,0,1,1,1,1,0,0,0,0,0,0,0,1,9,9,1,0,1,0,1,0,1,9,9,1,0,0,0,0,0,0,0,1,9,9,1,0,1,0,1,0,1,9,9,1,0,0,0,0,0,0,0,1,1,1,1,0,9,0,9,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],height:20,id:1,name:"idk",opacity:1,type:"tilelayer",visible:!1,width:20,x:0,y:0},{data:[0,0,0,1,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,9,9,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],height:20,id:3,name:"arrow",opacity:1,type:"tilelayer",visible:!1,width:20,x:0,y:0},{data:[0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,9,1,9,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,9,9,1,9,9,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,9,1,9,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,1,9,1,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],height:20,id:4,name:"skull",opacity:1,type:"tilelayer",visible:!1,width:20,x:0,y:0},{data:[0,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,9,9,1,9,9,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,9,9,9,9,9,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,9,9,9,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,9,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],height:20,id:2,name:"heart",opacity:1,type:"tilelayer",visible:!1,width:20,x:0,y:0},{data:[0,0,0,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,1,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,1,1,1,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,1,1,1,1,1,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,1,1,1,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,1,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],height:20,id:6,name:"star",opacity:1,type:"tilelayer",visible:!0,width:20,x:0,y:0}];class w{static init(){this.tile||(this.tile=[]),b.forEach(e=>{let t=new Array;for(var s=0;s<e.data.length;s++)s%e.width==0&&t.push([]),t[t.length-1].push(e.data[s]);this.tile.push(t),console.log(this.tile)})}}t(w,"tile");class f extends Phaser.GameObjects.Group{constructor(e){super(e),t(this,"bigPool"),this.bigPool=e.add.group(),this.bigPool.createMultiple({frameQuantity:100,key:"bigcoin",active:!1,visible:!1,classType:A}),this.createMultiple({frameQuantity:100,key:"coin",active:!1,visible:!1,classType:E})}update(){this.getChildren().forEach(e=>{e.update()}),this.bigPool.getChildren().forEach(e=>{e.update()})}test(e){const t=w.tile,s=Phaser.Math.RND.pick(t),i=300*Math.random()+300;this.spawnFromPattern(e,s,2e3,i,32)}spawnFromPattern(e,t,s,i,a=64){t.forEach((e,t)=>{e.forEach((e,r)=>{if(0===e)return;const h=s+r*a,n=i+t*a;if(1===e){const e=this.getFirstDead(!1);if(!e)return;e.reuse(h,n)}else if(9===e){const e=this.bigPool.getFirstDead(!1);if(!e)return;e.reuse(h,n)}})})}disableAll(){this.getChildren().forEach(e=>{e.body&&e.disableBody(!0,!0),e.setActive(!1).setVisible(!1),e.using=!1}),this.bigPool.getChildren().forEach(e=>{e.body&&e.disableBody(!0,!0),e.setActive(!1).setVisible(!1),e.using=!1})}}class _ extends m{constructor(e,t,s,i){var a;super(e,t,s,i),this.scene.physics.add.existing(this),this.scene.add.existing(this),null==(a=this.body)||a.setAllowGravity(!1),this.speed=r.speed,this.move()}move(){this.speed=r.speed,this.body.setVelocityX(-this.speed)}}class x extends _{constructor(e,t,s,i){super(e,t,s,i),this.setDepth(81),this.headAnimCreate(),g.play(this,"elechead"),this.scale=1,this.scene.physics.add.overlap(this,this.scene.player,()=>{let e=this.scene.player;e.isdead||e.switchState("deadbyzap")})}move(){this.body.setVelocityX(0)}headAnimCreate(){g.createAnim(this.scene,"elechead",n.ELEC_ON.KEY,0,3)}}class P extends _{constructor(e,s,i,a){super(e,s,i,a),t(this,"already",!1),this.setDepth(80),this.zapAnim(),g.play(this,"zapFX"),this.setScale(1,.5),this.scene.physics.add.overlap(this,this.scene.player,()=>{let e=this.scene.player;e.isdead||e.switchState("deadbyzap")})}move(){this.body.setVelocityX(0)}add(e){this.already||e.add(this)}zapAnim(){g.createAnim(this.scene,"zapFX",n.ZAP_FX.KEY,0,31)}}class S extends Phaser.GameObjects.Group{constructor(e){super(e),this.createMultiple({classType:P,key:"zap",frameQuantity:20,active:!1,visible:!1,setXY:{x:-1e3,y:-1e3}})}getZap(e,t,s){const i=this.getFirstDead(!1);if(i)return i.setActive(!0),i.setVisible(!0),i.setPosition(t,s),i.enableBody(),e.physics.world.enable(i),i;{const i=new P(e,t,s,"");return this.add(i),i}}returnZap(e){var t;e.setActive(!1),e.setVisible(!1),e.disableBody(),null==(t=e.body)||t.reset(-1e3,-1e3)}disableAll(){this.getChildren().forEach(e=>{this.returnZap(e)})}}class v extends Phaser.GameObjects.Container{constructor(e,s,i,a,h,n=!1,l=!1){super(e,s,i),t(this,"head"),t(this,"tail"),t(this,"zapfx"),t(this,"headfx"),t(this,"tailfx"),t(this,"speed"),this.speed=r.speed,this.zapfx=new S(this.scene),l&&(h=0),n&&(a=0),this.animInit(),this.head=new x(e,0,0,""),this.tail=new x(e,a,h,""),this.fxSetup(a,h),this.add([this.headfx,this.tailfx]);const o=this.calcZaps(a,h);this.add(o),this.add([this.head,this.tail]),this.rotateOrb(),e.add.existing(this),e.physics.add.existing(this),this.body&&this.body.setImmovable(!0).setAllowGravity(!1),this.move()}rotateOrb(){const e=Phaser.Math.Angle.Between(this.head.x,this.head.y,this.tail.x,this.tail.y),t=Phaser.Math.RadToDeg(e);this.head.setAngle(t+90),this.tail.setAngle(t+180+90),this.zapfx.getChildren().forEach(e=>{e.setAngle(t)})}move(){this.speed=r.speed,this.body&&this.body.setVelocityX(-this.speed)}update(){this.visible&&this.x<=-200&&this.deactivate()}animInit(){g.createAnim(this.scene,"elecglow",n.ELEC_ON_GLOW.KEY,0,15)}fxSetup(e,t){this.headfx=this.scene.add.sprite(0,0,""),this.tailfx=this.scene.add.sprite(e,t,""),g.play(this.headfx,"elecglow"),g.play(this.tailfx,"elecglow")}calcZaps(e,t){const s=Math.sqrt(e*e+t*t),i=Math.floor(s/32),a=Phaser.Math.Angle.Between(0,0,e,t);let r=t>0?1:-1;const h=32*Math.cos(a)-1,n=32*Math.sin(a)-r,l=[];for(let o=0;o<=i;o++){const e=h*o,t=n*o,s=this.zapfx.getZap(this.scene,e,t);if(s.setAngle(Phaser.Math.RadToDeg(a)),s.body instanceof Phaser.Physics.Arcade.Body){s.body.setAllowGravity(!1),s.body.setVelocityX(0);const e=s.width,t=s.height;s.body.setSize(e,t/4),s.body.setOffset(0,t/2-t/8)}g.play(s,"zapFX",o%32),s.add(this),l.push(s)}return l}reset(e,t,s,i,a=!1,r=!1){this.head.enableBody(),this.tail.enableBody(),this.setActive(!0),this.setVisible(!0),this.setPosition(e,t),r&&(i=0),a&&(s=0),this.head.setPosition(0,0),this.tail.setPosition(s,i),this.headfx.setPosition(this.head.x,this.head.y),this.tailfx.setPosition(this.tail.x,this.tail.y),this.calcZaps(s,i),this.remove([this.head,this.tail]),this.add([this.head,this.tail]),this.rotateOrb(),this.move()}deactivate(){this.body&&this.body.setVelocityX(0),this.head.disableBody(),this.tail.disableBody(),this.zapfx.getChildren().forEach(e=>{this.zapfx.returnZap(e)}),this.setActive(!1).setVisible(!1)}}class T extends Phaser.GameObjects.Group{constructor(e){super(e)}getElec(e,t,s,i,a,r=!1,h=!1){let n=this.getFirstDead(!1);return n?(n.setActive(!0),n.setVisible(!0),n.reset(t,s,i,a,r,h)):(n=new v(e,t,s,i,a,r,h),this.add(n)),n}returnElec(e){e.deactivate(),e.setActive(!1),e.setVisible(!1)}update(){this.getChildren().forEach(e=>{const t=e;t.active&&t.update()})}disableAll(){this.getChildren().forEach(e=>{this.returnElec(e)})}}class Y extends Phaser.GameObjects.Container{constructor(e,s){super(e,0,s),t(this,"head"),t(this,"tail"),t(this,"warning"),t(this,"laser"),this.animinit(),this.head=this.scene.add.sprite(100,0,n.LAZER_HEAD.KEY),this.tail=this.scene.add.sprite(this.scene.cameras.main.width-100,0,n.LAZER_HEAD.KEY).setFlip(!0,!1),this.laser=this.scene.physics.add.sprite(this.scene.cameras.main.width/2,0,n.LASER.KEY),this.laser.body.setAllowGravity(!1),this.laser.setScale((this.scene.cameras.main.width-200)/64,.5),this.scene.physics.add.overlap(this.laser,this.scene.player,()=>{this.scene.player.switchState("deadbyrocket"),this.turnOff()}),this.warning=this.scene.add.sprite(this.scene.cameras.main.width/2,0,h.LAZER_WARNING.KEY),this.warning.setScale((this.scene.cameras.main.width-200)/256,.5),this.add([this.warning,this.laser,this.head,this.tail]),this.scene.add.existing(this),this.head.setScale(.8),this.tail.setScale(.8)}turnOn(){this.warning.setVisible(!0),this.head.setVisible(!0),this.tail.setVisible(!0),this.laser.disableBody().setVisible(!1),this.scene.tweens.add({targets:this.warning,alpha:{from:0,to:1},duration:500,yoyo:!0,loop:1,onComplete:()=>{console.log("complete"),this.shot()}})}shot(){this.warning.setVisible(!1),g.play(this.head,"headrotate"),g.play(this.tail,"headrotate"),this.head.once(Phaser.Animations.Events.ANIMATION_COMPLETE,()=>{this.laser.enableBody().setVisible(!0),g.play(this.laser,"laser_shot")}),this.laser.once(Phaser.Animations.Events.ANIMATION_COMPLETE,()=>{this.turnOff()})}turnOff(){this.laser.disableBody().setVisible(!1),this.head.setVisible(!1),this.tail.setVisible(!1),this.warning.setVisible(!1)}animinit(){g.createAnim(this.scene,"laser_shot",n.LASER.KEY,8,15,24,!1),g.createAnim(this.scene,"headrotate",n.LAZER_HEAD.KEY,0,11,24,!1)}}class O{constructor(e){t(this,"Lazers",[]);for(var s=0;s<5;s++)this.Lazers.push(new Y(e,300+100*s));this.rest()}shot(){let e=[0,0,0,0,0],t=Phaser.Math.Between(1,3);for(var s=0;s<t;s++)e[s]=1;for(s=0;s<5;s++){let t=e[s],i=Phaser.Math.Between(0,4);e[s]=e[i],e[i]=t}for(s=0;s<5;s++)1==e[s]&&this.Lazers[s].turnOn()}rest(){this.Lazers.forEach(e=>{e.turnOff()})}}class k extends i.Physics.Arcade.Sprite{constructor(e,s,i){super(e,s,i,n.ROCKET.KEY),t(this,"warning"),t(this,"waiting"),t(this,"explode"),t(this,"rocketfire"),t(this,"rockethead"),t(this,"warningsound"),t(this,"rocketexplodesound"),t(this,"missilelaunch"),e.add.existing(this),e.physics.add.existing(this),this.init(e),this.setupAnimations(e),this.setupPhysics(e)}init(e){this.setScale(2),this.setVisible(!1),this.disableBody(!0,!0),this.warning=e.add.sprite(this.scene.cameras.main.width-50,300,n.WARNING.KEY),this.warning.setVisible(!1),this.warning.scale=1.5,this.explode=e.add.sprite(this.scene.cameras.main.width+100,300,n.EXPLOSION.KEY),this.explode.setVisible(!1),this.explode.scale=1.5,this.rocketfire=e.add.sprite(1450,300,n.ROCKET_FIRE.KEY),this.rocketfire.setVisible(!1),this.rocketfire.scale=1.5,this.scene.physics.add.existing(this.rocketfire),this.rocketfire.body.setAllowGravity(!1).setVelocity(0,0),this.rockethead=e.add.sprite(this.scene.cameras.main.width+100,300,n.ROCKET_FIRE.KEY),this.rockethead.setVisible(!1),this.rockethead.scale=1.5,this.scene.physics.add.existing(this.rockethead),this.rockethead.body.setAllowGravity(!1).setVelocity(0,0),this.missilelaunch=this.scene.sound.add(l.ROCKET_LAUNCH.KEY),this.warningsound=this.scene.sound.add(l.ROCKET_WARNING.KEY),this.rocketexplodesound=this.scene.sound.add(l.ROCKET_EXPLODE.KEY),this.rocketfire.setVisible(!1),this.rockethead.setVisible(!1)}setupAnimations(e){g.createAnim(e,"rocket",n.ROCKET.KEY,0,3),g.createAnim(e,"warning",n.WARNING.KEY,0,3,12,!0,2),g.createAnim(e,"warning2",n.WARNING.KEY,4,7,12,!0,2),g.createAnim(e,"explode",n.EXPLOSION.KEY,0,7,12,!1),g.createAnim(e,"fire",n.ROCKET_FIRE.KEY,0,3),g.createAnim(e,"rockethead",n.ROCKET_FIRE.KEY,4,7),g.play(this,"rocket"),g.play(this.rocketfire,"fire"),g.play(this.rockethead,"rockethead")}setupPhysics(e){this.body.setAllowGravity(!1),e.physics.add.overlap(this,e.player,()=>{this.explosion(),e.player.switchState("deadbyrocket")})}explosion(){this.rocketexplodesound.play();let e=this.scene.player;this.explode.setPosition(e.x,e.y),this.explode.setVisible(!0),g.play(this.explode,"explode"),this.explode.once(Phaser.Animations.Events.ANIMATION_COMPLETE,()=>{this.explode.setVisible(!1)}),this.reset()}pending(){this.reset(),this.waiting=!0,this.enableBody(!0,1200,500,!0,!0).setVisible(!0),this.setVelocityX(0),this.x=2e3,this.warning.setVisible(!0),g.play(this.warning,"warning"),this.warning.once(Phaser.Animations.Events.ANIMATION_COMPLETE,()=>{g.play(this.warning,"warning2"),this.warningsound.play(),this.warning.once(Phaser.Animations.Events.ANIMATION_COMPLETE,()=>{this.waiting=!1,this.scene.time.delayedCall(0,()=>{this.shot()},[],this)})})}shot(){this.y=this.warning.y,this.missilelaunch.play(),this.setVelocityX(-1200-r.speed),this.warning.setVisible(!1),this.setVisible(!0),this.rocketfire.setVisible(!0),this.rockethead.setVisible(!0),this.rocketfire.setPosition(this.x+32,this.y),this.rockethead.setPosition(this.x-16,this.y),this.rockethead.body.setVelocityX(-1200-r.speed),this.rocketfire.body.setVelocityX(-1200-r.speed)}update(e,t){this.visible&&(this.rocketfire.setVisible(this.visible),this.rockethead.setVisible(this.visible),this.waiting&&(this.warning.y=this.scene.player.y),this.x<-100&&this.reset())}reset(){this.setPosition(this.scene.cameras.main.width+100,500),this.setVelocityX(0),this.rockethead.body.setVelocityX(0),this.rocketfire.body.setVelocityX(0),this.setVisible(!1),this.disableBody(!0,!0),this.rocketfire.setVisible(!1),this.rockethead.setVisible(!1),this.rocketfire.setPosition(this.x+32,this.y),this.rockethead.setPosition(this.x-16,this.y)}}class R extends Phaser.GameObjects.Group{constructor(e){super(e),this.createMultiple({classType:k,key:"rocket",frameQuantity:5,active:!1,visible:!1})}getRocket(e){let t=this.getFirstDead(!1);return console.log(t),t||(t=new k(e,0,0),this.add(t)),t.pending(),t}update(e,t){this.getChildren().forEach(e=>{e.update()})}returnRocket(e){e.reset(),e.setActive(!1),e.setVisible(!1)}disableAll(){this.getChildren().forEach(e=>{this.returnRocket(e)})}}class B{constructor(e){t(this,"scene"),this.scene=e}onExit(){}}class K extends B{constructor(e){super(e),t(this,"Aura"),t(this,"Trail"),t(this,"headstart_start"),t(this,"headstart_mid"),t(this,"headstart_lp"),t(this,"headstart_stop"),g.createAnim(this.scene,"aura",n.SPEEDUP.KEY,0,7),g.createAnim(this.scene,"trail",n.SPEEDUP.KEY,8,15),this.Aura=this.scene.add.sprite(0,0,n.SPEEDUP.KEY).setVisible(!1).setScale(2,2),this.Trail=this.scene.add.sprite(0,0,n.SPEEDUP.KEY).setVisible(!1).setScale(2,2),this.headstart_start=this.scene.sound.add(l.HEADSTART_START.KEY),this.headstart_start.on("complete",()=>{this.headstart_lp.play()}),this.headstart_mid=this.scene.sound.add(l.HEADSTART_MID.KEY),this.headstart_mid.on("complete",()=>{this.headstart_start.play()}),this.headstart_lp=this.scene.sound.add(l.HEADSTART_LOOP.KEY,{loop:!0}),this.headstart_stop=this.scene.sound.add(l.HEADSTART_STOP.KEY)}onEnter(){this.scene.worker.forEach(e=>{e.rest()}),this.headstart_start.play(),this.scene.player.setY(500),this.scene.player.body.setAllowGravity(!1).setVelocity(0,0),r.speed=4e3,this.Aura.setVisible(!0).setPosition(this.scene.player.x+50,this.scene.player.y),g.play(this.Aura,"aura"),this.Trail.setVisible(!0).setPosition(this.scene.player.x-50-126,this.scene.player.y),g.play(this.Trail,"trail"),this.scene.player.switchState("hold"),g.playAnim(this.scene.player.playerSprite,"flydown")}onUpdate(e,t){r.score+=Math.round(r.speed*t/1e3),r.speed-=700*t/1e3,r.speed<300&&this.change()}onExit(){this.Aura.setVisible(!1),this.Trail.setVisible(!1)}change(){r.speed=300,this.scene.player.body.setAllowGravity(!0),this.scene.switchState("playing"),this.headstart_lp.stop(),this.headstart_stop.play()}}class M extends Phaser.GameObjects.Container{constructor(e,s){super(e),t(this,"bulletParticle"),t(this,"explode"),t(this,"bulletshell"),t(this,"player"),this.player=s,this.createParticle(),this.createExplode(),this.createShell(),this.player.add(this)}createParticle(){this.bulletParticle=this.scene.add.particles(0,0,h.BULLET.KEY,{follow:this.player,angle:{min:70,max:110},speed:2e3,scale:{start:2,end:2},alpha:{start:1,end:1},lifespan:1e3,frequency:50,quantity:1,emitting:!0})}stop(){this.bulletParticle.stop(),this.bulletshell.stop()}start(){this.bulletParticle.start(),this.bulletshell.start()}kill(){const e=this.bulletshell.overlap(this.player.scene.bot.body);e.length>0&&e.forEach(e=>{e.kill()});const t=this.bulletParticle.overlap(this.player.scene.bot.body);t.length>0&&t.forEach(e=>{this.explode.emitParticleAt(e.x,e.y),this.bulletshell.emitParticleAt(this.player.x,this.player.y+50),e.kill()})}createExplode(){this.explode=this.scene.add.particles(0,0,n.BULLET_FX.KEY,{frame:[0,1,2,3],emitting:!1,speed:0,scale:1.2,quantity:1,lifespan:50})}createShell(){this.bulletshell=this.scene.add.particles(0,0,h.BULLETSHELL.KEY,{emitting:!0,angle:{min:110,max:150},rotate:{min:0,max:360},scale:.5,speedX:-100,speedY:300,accelerationX:-1e3,accelerationY:600,quantity:1,lifespan:5e3})}}class H{constructor(e){t(this,"player"),this.player=e,this.animInit()}}class G extends H{constructor(e){super(e),t(this,"jetFX"),t(this,"bulletParticle"),t(this,"shootingsound"),t(this,"stopsound"),t(this,"down",!1),this.bulletParticle||(this.bulletParticle=new M(this.player.scene,this.player)),this.shootingsound=this.player.scene.sound.add(l.SHOOTING.KEY,{loop:!0}),this.stopsound=this.player.scene.sound.add(l.STOP_SHOOTING.KEY),this.bulletParticle.stop()}onEnter(){this.jetFX||this.createJetFX(),this.player.scene.tweens.add({targets:this.jetFX,alpha:{from:1,to:0},loop:-1,duration:100})}checkFly(){return this.player.controller.jetLaunch()}onUpdate(e,t){const s=this.player.controller.jetLaunch();this.bulletParticle.update(e,t,s),this.bulletParticle.kill(),s?this.flyup():this.flydown()}setFXVisible(e){this.jetFX.setVisible(e)}flyup(){this.shootingsound.isPlaying||this.shootingsound.play(),this.setFXVisible(!0),g.playAnim(this.player.playerSprite,"flyup"),this.bulletParticle.start(),this.down=!0}flydown(){this.setFXVisible(!1),this.down&&g.playAnim(this.player.playerSprite,"flydown"),this.down=!1,this.bulletParticle.stop(),this.stopsound.isPlaying||this.stopsound.play(),this.shootingsound.stop()}onExit(){this.setFXVisible(!1),this.player.body.setVelocityY(0),this.bulletParticle.stop(),this.stopsound.stop(),this.shootingsound.stop()}animInit(){this.flyUpAnimInit(),this.flyDownAnimInit(),this.jetFXAnim()}flyUpAnimInit(){g.createAnim(this.player.scene,"flyup_head",n.PLAYER_HEAD.KEY,4,7,24),g.createAnim(this.player.scene,"flyup_body",n.PLAYER_BODY.KEY,4,7,24),g.createAnim(this.player.scene,"flyup_jetpack",n.PLAYER_JETPACK.KEY,4,7,24)}flyDownAnimInit(){g.createAnim(this.player.scene,"flydown_head",n.PLAYER_HEAD.KEY,8,11,12,!1),g.createAnim(this.player.scene,"flydown_body",n.PLAYER_BODY.KEY,8,11,12,!1),g.createAnim(this.player.scene,"flydown_jetpack",n.PLAYER_JETPACK.KEY,8,11,12,!1)}createJetFX(){this.jetFX=this.player.scene.add.sprite(0,0,""),console.log(this.player.list),this.player.playerSprite.add(this.jetFX),this.jetFX.setName("jetfx"),this.jetFX.scale=.4,this.jetFX.y=24}jetFXAnim(){g.createAnim(this.player.scene,"flyup_jetfx",n.JET_FX.KEY,0,3,24),g.createAnim(this.player.scene,"flyup_bulletfx",n.BULLET_FX.KEY,0,3,24)}}class C extends Phaser.GameObjects.Container{constructor(e){super(e.scene),t(this,"workerHead"),t(this,"workerBody"),t(this,"workerJetpack"),this.AnimInit(),this.scene=e.scene,this.addHead(),this.addBody(),e.add(this),this.scale=4,this.start()}flip(e,t){this.list.forEach(s=>{s.setFlip(e,t)})}start(){switch(Phaser.Math.Between(0,1)){case 0:g.playAnim(this,"walking");break;case 1:g.playAnim(this,"running")}}showAll(e=!0,t=!0,s=!0){this.workerHead.setVisible(e),this.workerBody.setVisible(t),this.workerJetpack.setVisible(s)}addBody(){this.workerBody=this.scene.add.sprite(10,5,n.WORKER_BODY.KEY),this.add(this.workerBody),this.workerBody.setName("workerbody")}addHead(){this.workerHead=this.scene.add.sprite(10,-8,n.WORKER_HEAD.KEY),this.add(this.workerHead),this.workerHead.setName("workerhead")}AnimInit(){g.createAnim(this.scene,"walking_workerhead",n.WORKER_HEAD.KEY,0,3),g.createAnim(this.scene,"walking_workerbody",n.WORKER_BODY.KEY,0,3),g.createAnim(this.scene,"running_workerhead",n.WORKER_HEAD.KEY,4,7),g.createAnim(this.scene,"running_workerbody",n.WORKER_BODY.KEY,4,7),g.createAnim(this.scene,"dead_workerhead",n.WORKER_HEAD.KEY,0,0),g.createAnim(this.scene,"dead_workerbody",n.WORKER_BODY.KEY,0,0)}}class L extends Phaser.GameObjects.Container{constructor(e,s,i){var a;super(e,s,i),t(this,"workerSprite"),t(this,"offset",1),t(this,"player"),t(this,"dead",!1),t(this,"speed",0),this.workerSprite=new C(this),this.add(this.workerSprite),this.scene.add.existing(this),this.scale=.5,this.setupBody(),this.move(),this.player=this.scene.player,this.body&&this.workerSprite.flip((null==(a=this.body)?void 0:a.velocity.x)<0,!1),this.body.setAllowGravity(!1),this.y=Phaser.Math.Between(765,785),this.setDepth(this.y-750)}setupBody(){this.scene.physics.add.existing(this),this.body.setSize(70,128).setOffset(0,-64),this.scene.physics.add.collider(this,this.scene.bot)}move(){this.dead||this.scene.currentState instanceof K?this.body.setVelocityX(-r.speed):this.body.setVelocityX(this.offset*this.speed)}rest(){0===Phaser.Math.Between(0,1)?(this.x=Phaser.Math.Between(-300,-50),this.offset=1):(this.x=Phaser.Math.Between(this.scene.cameras.main.width+50,this.scene.cameras.main.width+300),this.offset=-1),this.body.setVelocity(0,0),this.dead=!1,this.setRotation(0),this.workerSprite.start(),this.speed=Phaser.Math.Between(100,300),this.offset<0&&(this.speed=Phaser.Math.Between(300+r.speed,r.speed+400))}update(){var e;(this.x<-400||this.x>this.scene.cameras.main.width+400)&&this.rest(),this.dead&&(this.setRotation(Phaser.Math.DegToRad(90)),this.body.setVelocityX(-r.speed),g.playAnim(this.workerSprite,"dead")),0==(null==(e=this.body)?void 0:e.velocity.x)&&this.move(),this.body&&this.workerSprite.flip(this.offset<0,!1),this.x>2e3&&(this.x=-100,this.workerSprite.start(),this.move());const t=this.scene.player;this.x>t.x-100&&this.x<t.x+100&&t.currentState instanceof G&&t.currentState.checkFly()&&this.hitByBullet()}hitByBullet(){this.dead||(this.dead=!0)}}class I extends Phaser.GameObjects.Sprite{constructor(e,s,i){super(e,0,0,s),t(this,"player"),this.animInit(),this.player=i,i.playerSprite.add(this),i.scene.add.existing(this)}animInit(){}control(){}}class V extends I{constructor(e,t){super(e,n.GRAVITY_SUIT.KEY,t),this.setName(n.GRAVITY_SUIT.KEY)}animInit(){g.createAnim(this.scene,"walking_gravitysuit",n.GRAVITY_SUIT.KEY,0,5),g.createAnim(this.scene,"landing_gravitysuit",n.GRAVITY_SUIT.KEY,18,21,12,!1),g.createAnim(this.scene,"flip_gravitysuit",n.GRAVITY_SUIT.KEY,6,17,12,!0)}control(){this.player.controller.gravChange(!0),0!=this.player.body.velocity.y&&(this.player.switchState("hold"),g.play(this,"flip_gravitysuit"))}}class F{constructor(e,s){var i;t(this,"player"),t(this,"scene"),t(this,"spaceBar"),this.player=s,this.scene=e,this.spaceBar=null==(i=e.input.keyboard)?void 0:i.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE),this.scene.input.on("pointerdown",e=>{s.vehicle instanceof V&&e.leftButtonDown()&&(this.gravChange(!1),this.player.playerSprite.flip(!1,this.scene.physics.world.gravity.y<0))})}jetLaunch(){var e;if(this.player.isdead)return!1;const t=this.scene.input.activePointer.isDown||(null==(e=this.spaceBar)?void 0:e.isDown);return this.player.body.setAccelerationY(t?-3e3:0),t||!1}gravChange(e){if(this.player.isdead)return!1;if(this.spaceBar){if(!e){const e=this.scene.physics.world.gravity.y;return this.scene.physics.world.gravity.y=-e,!0}if(Phaser.Input.Keyboard.JustDown(this.spaceBar)){const e=this.scene.physics.world.gravity.y;return this.scene.physics.world.gravity.y=-e,this.player.playerSprite.flip(!1,this.scene.physics.world.gravity.y<0),!0}}return!1}toggleGravity(){if(this.player.isdead)return;const e=this.scene.physics.world.gravity.y;this.scene.physics.world.gravity.y=-e}}class N extends Phaser.GameObjects.Container{constructor(e){super(e.scene),t(this,"playerHead"),t(this,"playerBody"),t(this,"playerJetpack"),this.scene=e.scene,this.addHead(),this.addBody(),this.addJetPack(),e.add(this),this.scale=4}flip(e,t){this.list.forEach(s=>{s.setFlip(e,t)})}showAll(e=!0,t=!0,s=!0){this.playerHead.setVisible(e),this.playerBody.setVisible(t),this.playerJetpack.setVisible(s)}addBody(){this.playerBody=this.scene.add.sprite(10,5,n.PLAYER_BODY.KEY),this.add(this.playerBody),this.playerBody.setName("body")}addHead(){this.playerHead=this.scene.add.sprite(10,-8,n.PLAYER_HEAD.KEY),this.add(this.playerHead),this.playerHead.setName("head")}addJetPack(){this.playerJetpack=this.scene.add.sprite(0,5,n.PLAYER_JETPACK.KEY),this.add(this.playerJetpack),this.playerJetpack.setName("jetpack")}}class D{constructor(){t(this,"currentState",null),t(this,"states",{})}switchState(e){const t=this.states[e];t?this.currentState!==t&&(this.currentState&&this.currentState.onExit(),this.currentState=t,this.currentState.onEnter(),this.onStateChanged(e)):console.warn(`State '${e}' not found in state machine`)}update(e,t){this.currentState&&this.currentState.onUpdate(e,t)}addState(e,t){this.states[e]=t}removeState(e){this.states[e]&&(this.currentState===this.states[e]&&(this.currentState.onExit(),this.currentState=null),delete this.states[e])}hasState(e){return e in this.states}getCurrentStateName(){if(!this.currentState)return null;for(const[e,t]of Object.entries(this.states))if(t===this.currentState)return e;return null}onStateChanged(e){}getStateNames(){return Object.keys(this.states)}exitCurrentState(){this.currentState&&(this.currentState.onExit(),this.currentState=null)}}class X extends D{constructor(){super()}onStateChanged(e){console.log(`Player state changed to: ${e}`)}canSwitchToState(e){return("walking"!==e||!this.isPlayerDead())&&this.hasState(e)}isPlayerDead(){const e=this.getCurrentStateName();return(null==e?void 0:e.includes("dead"))||!1}switchState(e){this.canSwitchToState(e)?super.switchState(e):console.warn(`Cannot switch to state '${e}' - transition not allowed`)}}class U extends H{constructor(){super(...arguments),t(this,"progress",0)}onEnter(){g.playAnim(this.player.playerSprite,"dead"),r.speed=300,this.player.playerSprite.setRotation(Phaser.Math.DegToRad(-90)),this.player.playerSprite.y+=50,this.player.body.setAcceleration(0,0),this.player.scene.zapManager.disableAll(),this.player.scene.rockets.disableAll()}onUpdate(...e){r.speed<230&&this.player.scene.switchState("over")}onExit(){this.player.playerSprite.y-=50,this.player.playerSprite.setRotation(Phaser.Math.DegToRad(0))}animInit(){this.createDeadAnim()}createDeadAnim(){g.createAnim(this.player.scene,"dead_head",n.PLAYER_HEAD.KEY,24,31,12,!1),g.createAnim(this.player.scene,"dead_body",n.PLAYER_BODY.KEY,24,31,12,!1)}}class j extends H{constructor(){super(...arguments),t(this,"progress",0)}onEnter(){if(null!=this.player.vehicle)return this.player.vehicle=null,this.player.switchState("reborn"),console.log("pppp"),this.player.scene.zapManager.disableAll(),this.player.scene.rockets.disableAll(),this.player.scene.lasers.rest(),void this.player.scene.coinManager.disableAll();this.progress=0,this.player.playerSprite.playerJetpack.setVisible(!1),this.player.isdead=!0,this.player.scene.cameras.main.shake(250,.01),g.playAnim(this.player.playerSprite,"deadrocket",()=>{this.player.switchState("dead")})}onUpdate(...e){this.player.body.velocity.y<0&&this.player.body.setVelocityY(0)}onExit(){}animInit(){this.createDeadAnim()}createDeadAnim(){g.createAnim(this.player.scene,"deadrocket_head",n.PLAYER_HEAD.KEY,20,23,12,!1),g.createAnim(this.player.scene,"deadrocket_body",n.PLAYER_BODY.KEY,20,23,12,!1)}}class W extends H{constructor(){super(...arguments),t(this,"progress",0),t(this,"sound")}onEnter(){if(this.sound||(this.sound=this.player.scene.sound.add("playerelec")),null!=this.player.vehicle)return this.player.vehicle=null,this.player.switchState("reborn"),console.log("pppp"),this.player.scene.zapManager.disableAll(),this.player.scene.rockets.disableAll(),this.player.scene.lasers.rest(),void this.player.scene.coinManager.disableAll();this.progress=0,this.player.playerSprite.playerJetpack.setVisible(!1),this.player.isdead=!0,this.player.scene.cameras.main.shake(250,.01),this.sound.play(),g.playAnim(this.player.playerSprite,"deadzap",()=>{this.player.switchState("dead")})}onUpdate(...e){this.player.body.velocity.y<0&&this.player.body.setVelocityY(0)}onExit(){}animInit(){this.createZapDeadAnim()}createZapDeadAnim(){g.createAnim(this.player.scene,"deadzap_head",n.PLAYER_HEAD.KEY,16,19,12,!1),g.createAnim(this.player.scene,"deadzap_body",n.PLAYER_BODY.KEY,16,19,12,!1)}}class z extends H{onEnter(){}onUpdate(...e){}onExit(){}animInit(){}}class J extends H{constructor(){super(...arguments),t(this,"hit")}onEnter(){this.hit||(this.hit=this.player.scene.sound.add(l.HIT.KEY)),this.player.playerSprite.flip(!1,!1),this.player.scene.physics.world.gravity.y=Math.abs(this.player.scene.physics.world.gravity.y),this.player.scene.cameras.main.shake(500,.02),this.player.scene.cameras.main.flash(500,255,255,255),this.hit.play(),this.player.playerSprite.showAll(),this.player.playerSprite.list.pop()}onUpdate(...e){}onExit(){}animInit(){}}class Z extends I{constructor(e,t){super(e,"",t)}control(){this.player.controller.jetLaunch(),this.player.body.velocity.y<0&&this.player.switchState("flying")}}class q extends H{constructor(){super(...arguments),t(this,"vehicles"),t(this,"currentVehicle")}onEnter(){this.player.scene.cameras.main.shake(250,.01,!0,()=>{this.player.scene.cameras.main.shake(250,.01)}),this.player.body.setAcceleration(0,0),this.player.playerSprite.showAll(!1,!1,!1),this.vehicleInit(),this.currentVehicle=this.vehicles[1],this.player.playerSprite.add(this.currentVehicle),this.player.vehicle=this.currentVehicle,this.player.scene.cameras.main.flash(500,255,255,255)}onUpdate(e,t){}animInit(){}onExit(){}vehicleInit(){this.vehicles||(this.vehicles=[],this.vehicles.push(new Z(this.player.scene,this.player)),this.vehicles.push(new V(this.player.scene,this.player)))}}class Q extends H{constructor(e){super(e),t(this,"runsound",[]);for(let t=1;t<5;t++)this.runsound[t]=this.player.scene.sound.add("run_"+String(t)),this.runsound[t].on("complete",()=>{this.runsound[4==t?1:t+1].isPlaying||this.runsound[4==t?1:t+1].play()})}onEnter(){g.playAnim(this.player.playerSprite,"landing",()=>{var e;0==(null==(e=this.player.body)?void 0:e.velocity.y)&&g.playAnim(this.player.playerSprite,"walking")}),this.runsound[1].play()}onUpdate(e,t){null===this.player.vehicle?(this.player.controller.jetLaunch(),this.player.body.velocity.y<0&&this.player.switchState("flying")):(this.player.vehicle.control(),console.log("control;"))}onExit(){this.runsound.forEach(e=>{e.stop()})}animInit(){this.landingInit(),this.walkingAnimInit()}walkingAnimInit(){g.createAnim(this.player.scene,"walking_head",n.PLAYER_HEAD.KEY,0,3),g.createAnim(this.player.scene,"walking_body",n.PLAYER_BODY.KEY,0,3),g.createAnim(this.player.scene,"walking_jetpack",n.PLAYER_JETPACK.KEY,0,3)}landingInit(){g.createAnim(this.player.scene,"landing_head",n.PLAYER_HEAD.KEY,12,15,12,!1),g.createAnim(this.player.scene,"landing_body",n.PLAYER_BODY.KEY,12,15,12,!1),g.createAnim(this.player.scene,"landing_jetpack",n.PLAYER_JETPACK.KEY,12,15,12,!1)}}class $ extends Phaser.GameObjects.Container{constructor(e,s,i){super(e,s,i),t(this,"isdead",!1),t(this,"shadowSprite"),t(this,"playerSprite"),t(this,"stateMachine"),t(this,"currentState"),t(this,"states"),t(this,"controller"),t(this,"onGround",!1),t(this,"vehicle"),this.setupBody(),this.setUpSprite(),this.vehicle=null,this.stateMachine=new X,this.stateInit(),this.controller=new F(this.scene,this),this.scene.add.existing(this),this.switchState("hold"),this.scale=.5,this.setDepth(111)}rest(){this.shadowSprite.setVisible(!1),this.setPosition(this.x,this.y-10),this.setVisible(!1),this.switchState("hold"),this.playerSprite.showAll(),this.isdead=!1}update(e,t){var s;this.onGround=this.body.blocked.down,this.shadowSprite.setVisible(this.visible),this.shadowSprite.x=this.x,super.update(e,t),0!=(null==(s=this.body)?void 0:s.velocity.y)&&(this.onGround=!1),this.stateMachine.update(e,t),this.currentState=this.stateMachine.currentState,this.shadowSprite.x=this.x,this.shadowSprite.scale=(this.y+300)/350}switchState(e){"walking"==e&&this.isdead||(this.stateMachine.switchState(e),this.currentState=this.stateMachine.currentState)}setUpSprite(){this.shadowSprite=this.scene.add.sprite(0,0,h.SHADOW.KEY),this.playerSprite=new N(this),this.shadowSprite.x=this.x+20,this.shadowSprite.y=785,this.shadowSprite.setAlpha(.5)}resetBody(){this.body.setSize(70,128).setOffset(0,-64)}setupBody(){this.scene.physics.add.existing(this),this.body.setSize(70,128).setOffset(0,-64)}stateInit(){this.states={walking:new Q(this),flying:new G(this),deadbyzap:new W(this),deadbyrocket:new j(this),dead:new U(this),upgrade:new q(this),hold:new z(this),reborn:new J(this)},Object.entries(this.states).forEach(([e,t])=>{this.stateMachine.addState(e,t)})}}class ee extends D{constructor(){super()}onStateChanged(e){console.log(`Game state changed to: ${e}`)}}class te extends B{constructor(){super(...arguments),t(this,"rescueOverlay"),t(this,"rescueCostText")}onEnter(){if(this.scene.player.body.setAllowGravity(!1),this.scene.zapManager.disableAll(),this.scene.rockets.disableAll(),this.scene.coinManager.disableAll(),this.scene.worker.forEach(e=>{e.rest()}),this.scene.player.rest(),this.scene.dieOnce||r.maxCoin<1e3)return this.hideRescueOverlay(),void this.transitionToPending();this.scene.dieOnce=!0,this.ensureRescueOverlay(),this.showRescueOverlay(),this.animateRescueOverlay(),r.speed=0}transitionToPending(e=100){this.scene.time.delayedCall(e,()=>{this.scene.player.setVisible(!0),this.scene.player.setPosition(-500,500),this.scene.switchState("pending")})}ensureRescueOverlay(){if(this.rescueOverlay)return;const e=this.scene.cameras.main.centerX;this.rescueOverlay=this.scene.add.sprite(e,500,"revive").setInteractive().setAlpha(0),this.rescueOverlay.on("pointerdown",()=>{this.scene.switchState("playing"),this.scene.player.switchState("flying"),r.speed=300,r.payCoin(1e3),this.scene.cameras.main.flash(500,255,255,255),this.scene.cameras.main.shake(250,.01),this.hideRescueOverlay(),this.scene.tweens.killTweensOf(this.rescueOverlay)}),this.rescueCostText=this.scene.add.text(this.scene.cameras.main.width/2,550,"1000\n",{fontSize:"40px",fontFamily:"Courier",color:"#ffff00",align:"center",fontStyle:"bold",stroke:"#000000",strokeThickness:5}).setOrigin(.5)}showRescueOverlay(){var e,t;null==(e=this.rescueOverlay)||e.setActive(!0).setVisible(!0),null==(t=this.rescueCostText)||t.setActive(!0).setVisible(!0)}hideRescueOverlay(){var e,t;null==(e=this.rescueOverlay)||e.setActive(!1).setVisible(!1),null==(t=this.rescueCostText)||t.setActive(!1).setVisible(!1)}animateRescueOverlay(){this.rescueOverlay&&this.rescueCostText&&(this.scene.tweens.killTweensOf([this.rescueOverlay,this.rescueCostText]),this.scene.tweens.add({targets:[this.rescueOverlay],alpha:{from:0,to:1},duration:1e3,yoyo:!0,loop:2,onComplete:()=>{this.hideRescueOverlay(),this.transitionToPending()}}))}onUpdate(e,t){}onExit(){this.scene.player.body.setAllowGravity(!0)}}class se extends Phaser.GameObjects.Container{constructor(e,s,i,a,r){super(e,s,i),t(this,"border",[[]]),this.scene.add.existing(this),this.border[0].push(this.scene.add.sprite(-a/2-7.5,-r/2-7.5,h.CONTAINER_EDGE.KEY)),this.border[0].push(this.scene.add.sprite(0,-r/2-7.5,h.CONTAINER_TOP.KEY).setScale(a/34,1)),this.border[0].push(this.scene.add.sprite(a/2+7.5,-r/2-7.5,h.CONTAINER_EDGE.KEY).setFlipX(!0)),this.border.push([]),this.border[1].push(this.scene.add.sprite(-a/2-7.5,0,h.CONTAINER_LEFT.KEY).setScale(1,r/34)),this.border[1].push(this.scene.add.sprite(0,0,h.CONTAINER_FILLER.KEY).setScale(a,r)),this.border[1].push(this.scene.add.sprite(a/2+7.5,0,h.CONTAINER_LEFT.KEY).setScale(1,r/34).setFlipX(!0)),this.border.push([]),this.border[2].push(this.scene.add.sprite(-a/2-7.5,r/2+7.5,h.CONTAINER_EDGE.KEY).setFlip(!1,!0)),this.border[2].push(this.scene.add.sprite(0,r/2+7.5,h.CONTAINER_TOP.KEY).setScale(a/34,1).setFlip(!1,!0)),this.border[2].push(this.scene.add.sprite(a/2+7.5,r/2+7.5,h.CONTAINER_EDGE.KEY).setFlip(!0,!0)),this.border.forEach(e=>{e.forEach(e=>{this.add(e)})})}}class ie extends Phaser.GameObjects.Container{constructor(e){super(e),t(this,"logo"),t(this,"center"),t(this,"text"),t(this,"cointext"),t(this,"scoretext"),t(this,"coinLayout"),this.center={x:this.scene.cameras.main.width/2,y:this.scene.cameras.main.height/2},this.addLogo(),this.addText(),this.addCoinText(),this.addScoreText(),this.addBox(),this.scene.add.existing(this),this.setDepth(1e4)}resettext(){this.cointext.text=String(localStorage.getItem("coin")),this.scoretext.text=String(localStorage.getItem("score"))}addCoinText(){let e=r.maxCoin;this.cointext=this.scene.add.text(0,-10,String(e),{fontSize:"20px",fontFamily:"Courier",color:"#ffff00",align:"center",fontStyle:"bold",stroke:"#000000",strokeThickness:5}).setOrigin(.5)}addScoreText(){let e=r.maxScore;this.scoretext=this.scene.add.text(0,10,String(e),{fontSize:"20px",fontFamily:"Courier",color:"#ffffff",align:"center",fontStyle:"bold",stroke:"#000000",strokeThickness:5}).setOrigin(.5)}addBox(){this.coinLayout=new se(this.scene,this.center.x-100,300-this.center.y,100,50),this.add(this.coinLayout),this.coinLayout.add(this.cointext),this.coinLayout.add(this.scoretext)}addText(){this.text=this.scene.add.text(0,200,"TOUCH ANYWHERE TO PLAY!",{fontSize:"30px",fontFamily:"Courier",color:"#ffffff",align:"center",fontStyle:"bold",stroke:"#000000",strokeThickness:5}).setOrigin(.5),this.scene.tweens.add({targets:this.text,alpha:{from:0,to:1},duration:1e3,yoyo:!0,repeat:-1}),this.add(this.text)}addLogo(){this.setPosition(this.center.x,this.center.y),this.logo=this.scene.add.sprite(0,0,h.JETLOGO.KEY),this.scene.tweens.add({targets:this.logo,alpha:{from:0,to:1},duration:1e3}),this.add(this.logo)}}class ae extends B{constructor(e){super(e),t(this,"playingsound"),t(this,"startOverlay"),t(this,"explode"),t(this,"explodesound"),this.explodesound=this.scene.sound.add(l.SMASH.KEY),this.playingsound=this.scene.sound.add(l.MENU_BGM.KEY,{loop:!0}),this.startOverlay=new ie(this.scene),this.startOverlay.setVisible(!1),this.explode=this.scene.add.particles(-15,700,h.DUST.KEY,{angle:{min:-110,max:110},speed:300,scale:{min:1,max:2},rotate:{min:0,max:360},alpha:{start:1,end:0},lifespan:1e3,frequency:50,quantity:5,emitting:!1}),this.scene.tweens.add({targets:this.startOverlay,alpha:{from:0,to:1},duration:1e3})}onEnter(){this.startOverlay.resettext(),this.scene.dieOnce=!1,this.scene.played=!1,this.scene.worker.forEach(e=>{e.rest()}),this.playingsound.isPlaying||this.playingsound.play(),this.scene.player.body.setAllowGravity(!1),r.speed=0,this.scene.tweens.add({targets:this.startOverlay,alpha:{from:0,to:1},duration:1e3}),this.startOverlay.setVisible(!0),this.scene.input.once("pointerdown",()=>{this.explode.start(),this.explodesound.play(),this.scene.player.body.setAllowGravity(!0),this.scene.cameras.main.shake(250,.01),this.scene.player.body.setVelocityX(300),this.scene.tweens.add({targets:this.startOverlay,alpha:{from:1,to:0},duration:1e3,onComplete:()=>{this.explode.stop(),this.startOverlay.setVisible(!1)}})}),this.scene.bg.rest()}onUpdate(e,t){this.startOverlay.update(),this.scene.player.x>=300&&this.scene.switchState("playing")}onExit(){this.playingsound.stop(),this.startOverlay.setVisible(!1),r.speed=300,this.scene.player.body.setVelocityX(0),r.score=0,r.coin=0}}class re extends m{constructor(e,s,i){super(e,s,i,n.UPGRADE.KEY),t(this,"upgradesound"),this.createUpgradeAnim(),this.upgradesound=this.scene.sound.add(l.POWERUP.KEY),g.play(this,"upgrade"),this.scene.physics.add.overlap(this,this.scene.player,()=>{this.scene.player.isdead||this.onCollect()}),this.scale=.8,console.log("Upgrade created at",s,i)}preUpdate(e,t){super.preUpdate(e,t),this.x<-1e3&&this.disableBody(!0,!0).setVisible(!1)}move(){this.speed=r.speed,this.body.setVelocityX(-this.speed)}createUpgradeAnim(){g.createAnim(this.scene,"upgrade",n.UPGRADE.KEY,0,7)}onCollect(){this.upgradesound.play(),this.disableBody(!0,!0).setVisible(!1),this.scene.player.switchState("upgrade")}create(e,t){this.setVisible(!0),this.enableBody(!0,e,t,!0,!0),g.play(this,"upgrade"),this.move()}}class he extends B{constructor(e){super(e),t(this,"scoreBox"),t(this,"scoretext"),t(this,"cointext"),t(this,"upgrade"),t(this,"Booster"),t(this,"price"),t(this,"elec",[]),t(this,"progress"),t(this,"playingsound"),this.playingsound=this.scene.sound.add(l.PLAYING_BGM.KEY,{loop:!0}),this.addText(),this.scoreBox=new se(this.scene,100,200,100,50).setVisible(!1),this.scoreBox.add(this.scoretext),this.scoreBox.add(this.cointext),this.upgrade=new re(this.scene,Phaser.Math.Between(5e3,1e4),500),this.Booster=this.scene.add.sprite(this.scene.cameras.main.width/2,500,h.BOOSTER.KEY),this.price=this.scene.add.text(this.scene.cameras.main.width/2,550,"1000",{fontSize:"40px",fontFamily:"Courier",color:"#ffff00",align:"center",fontStyle:"bold",stroke:"#000000",strokeThickness:5}).setOrigin(.5),this.price.setVisible(!1),this.Booster.once("pointerdown",()=>{console.log("Booster clicked"),this.Booster.setActive(!1).setVisible(!1),this.scene.switchState("dashing"),this.scene.played=!0,this.price.setVisible(!1),r.payCoin(1e3)}),this.Booster.setActive(!1).setVisible(!1)}onEnter(){this.upgrade.setPosition(Phaser.Math.Between(5e3,1e4),500),this.scene.player.setVisible(!0),this.playingsound.isPlaying||this.playingsound.play(),this.scoreBox.setVisible(!0),!this.scene.played&&r.maxCoin>=1e3&&(this.Booster.setActive(!0).setVisible(!0).setInteractive(),this.scene.tweens.add({targets:this.Booster,alpha:{from:0,to:1},yoyo:!0,duration:1e3,loop:2,onComplete:()=>{this.Booster.setActive(!1).setVisible(!1),this.scene.played=!0,this.price.setVisible(!1)}}),this.price.setVisible(!0)),this.scene.played=!0}onUpdate(e,t){if(this.scene.worker.forEach(e=>{e.update()}),this.upgrade.move(),this.scene.coinManager.update(),this.scene.zapManager.update(),this.scene.rockets.update(e,t),this.scoretext.text=String(r.score),this.cointext.text=String(r.coin),this.scene.player.update(e,t),this.scene.progress+=t,this.progress+=t,r.score+=Math.round(r.speed*t/1e3),r.score>r.maxScore&&r.setHighScore(),this.scene.progress>=2e3&&(r.speed+=this.scene.player.isdead?-100:5,r.speed=Math.max(0,r.speed),this.scene.progress=0,!this.scene.player.isdead))switch(Phaser.Math.Between(0,3)){case 0:this.scene.coinManager.test(this.scene);break;case 1:console.log(this.RandomElec().x);break;case 2:this.scene.rockets.getRocket(this.scene);break;case 3:4==Phaser.Math.Between(0,4)&&this.scene.lasers.shot()}this.scene.zapManager.getChildren().forEach(e=>{e.update()})}RandomElec(){console.log("Spawning Elec obstacle");let e=Phaser.Math.Between(0,2),t=Phaser.Math.Between(Math.max(this.scene.player.y-100,250),Math.min(700,this.scene.player.y+100));if(0==e){const e=Phaser.Math.Between(100,300),s=0===Phaser.Math.Between(0,1)?Phaser.Math.Between(-150,-100):Phaser.Math.Between(100,150);return this.scene.zapManager.getElec(this.scene,2e3,t,e,s,!1,!1)}if(1==e){const e=Phaser.Math.Between(100,200);return this.scene.zapManager.getElec(this.scene,2e3,t,e,0,!1,!0)}{const e=0===Phaser.Math.Between(0,1)?Phaser.Math.Between(-100,-200):Phaser.Math.Between(100,200);return this.scene.zapManager.getElec(this.scene,2e3,t,0,e,!0,!1)}}onExit(){this.scene.worker.forEach(e=>{e.rest()}),this.upgrade.setPosition(Phaser.Math.Between(5e3,1e4),500).setVelocityX(0),this.playingsound.stop(),this.scoreBox.setVisible(!1),this.scene.coinManager.disableAll(),this.scene.zapManager.disableAll(),this.scene.rockets.disableAll(),this.scene.lasers.rest()}addText(){let e=r.score;this.scoretext=this.scene.add.text(0,10,String(e),{fontSize:"20px",fontFamily:"Courier",color:"#ffffff",align:"center",fontStyle:"bold",stroke:"#000000",strokeThickness:5}).setOrigin(.5);let t=r.coin;this.cointext=this.scene.add.text(0,-10,String(t),{fontSize:"20px",fontFamily:"Courier",color:"#fff000",align:"center",fontStyle:"bold",stroke:"#000000",strokeThickness:5}).setOrigin(.5)}}class ne extends Phaser.Scene{constructor(){super("GameScene"),t(this,"worker",[]),t(this,"played",!1),t(this,"player"),t(this,"progress",0),t(this,"bot"),t(this,"coinManager"),t(this,"stateMachine"),t(this,"bg"),t(this,"currentState"),t(this,"states"),t(this,"zapManager"),t(this,"rockets"),t(this,"startOverlay"),t(this,"lasers"),t(this,"dieOnce",!1),this.stateMachine=new ee}preload(){}create(){this.played=!1,this.cameras.main.setViewport(0,-128,1720,1080),r.speed=300,this.bg=new u(this),this.player=new $(this,-500,500),this.createBot(),this.createTop(),this.coinManager=new f(this),this.lasers=new O(this);for(var e=0;e<5;e++)this.worker.push(new L(this,2e3,600));this.worker.forEach(e=>{e.rest()}),this.stateInit(),this.zapManager=new T(this),this.rockets=new R(this),this.switchState("pending")}switchState(e){this.stateMachine.switchState(e),this.currentState=this.stateMachine.currentState}update(e,t){this.stateMachine.update(e,t),this.bg&&this.bg.update(e,t),this.currentState=this.stateMachine.currentState}createBot(){this.bot=new Phaser.GameObjects.Rectangle(this,100,1e3,7800,430),this.physics.add.existing(this.bot),this.physics.add.collider(this.bot,this.player,()=>{this.player.switchState("walking")}),this.bot.body.setImmovable(!0).setAllowGravity(!1),this.add.existing(this.bot)}createTop(){let e=new Phaser.GameObjects.Rectangle(this,400,20,3e3,500);this.physics.add.existing(e),this.physics.add.collider(e,this.player,()=>{this.player.vehicle instanceof V&&this.player.switchState("walking")}),e.body.setImmovable(!0).setAllowGravity(!1),this.add.existing(e)}stateInit(){this.states={pending:new ae(this),playing:new he(this),dashing:new K(this),over:new te(this)},Object.entries(this.states).forEach(([e,t])=>{this.stateMachine.addState(e,t)})}}class le extends i.Scene{constructor(){super("MainMenu"),t(this,"background"),t(this,"logo"),t(this,"title")}preload(){}create(){const{width:e,height:t}=this.scale;this.background=this.add.image(e/2,t/2,h.SPLASH.KEY);const s=e/this.background.width,i=t/this.background.height;this.background.setScale(s,i),this.background.setScrollFactor(0),this.input.once("pointerdown",()=>{this.scene.start("GameScene"),this.scale.startFullscreen()})}}class oe extends i.Scene{constructor(){super("Preloader")}init(){this.add.rectangle(this.cameras.main.width/2,this.cameras.main.height/2,468,32).setStrokeStyle(5,16777215);const e=this.add.rectangle(this.cameras.main.width/2-234+1,this.cameras.main.height/2,4,28,16777215);this.load.on("progress",t=>{e.width=4+460*t})}preload(){this.loadAssets()}create(){r.init(),w.init(),this.scene.start("MainMenu")}loadAssets(){Object.values(h).forEach(e=>this.load.image(e.KEY,e.PATH)),Object.values(n).forEach(e=>this.load.spritesheet(e.KEY,e.PATH,{frameWidth:e.FRAME_W,frameHeight:e.FRAME_H})),Object.values(l).forEach(e=>this.load.audio(e.KEY,e.PATH)),Object.values(o).forEach(e=>this.load.json(e.KEY,e.PATH)),Object.values(c).forEach(e=>this.load.tilemapTiledJSON(e.KEY,e.PATH))}}const ce={type:i.AUTO,width:screen.width,height:screen.height,parent:"game-container",backgroundColor:"#000000",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,height:800,width:1720},render:{antialias:!1,pixelArt:!0,roundPixels:!0},audio:{disableWebAudio:!1},scene:[a,oe,le,ne],physics:{default:"arcade",arcade:{gravity:{x:0,y:1300}}}};document.addEventListener("DOMContentLoaded",()=>{new i.Game({...ce,parent:"game-container"})});
