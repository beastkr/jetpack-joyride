var e=Object.defineProperty,t=(t,s,i)=>((t,s,i)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[s]=i)(t,"symbol"!=typeof s?s+"":s,i);import{r as s}from"./phaser-DJe_tbjO.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var i=s();class a extends i.Scene{constructor(){super("Boot")}preload(){}create(){this.scene.start("Preloader"),this.scale.on("resize",this.resize,this)}resize(e){e.width,e.height}}class r{static collectCoin(e){this.coin+=e,this.maxCoin+=e,localStorage.setItem("coin",String(this.maxCoin))}static init(){this.maxCoin=Number(localStorage.getItem("coin"))??0,this.maxScore=Number(localStorage.getItem("score"))??0}static setHighScore(){this.maxScore=this.score,localStorage.setItem("score",String(this.score))}static payCoin(e){this.maxCoin-=e,localStorage.setItem("coin",String(this.maxCoin))}}t(r,"speed",300),t(r,"coin",0),t(r,"maxCoin"),t(r,"score",0),t(r,"maxScore",0);class h extends Phaser.Physics.Arcade.Sprite{constructor(e,s,i,a){var h;super(e,s,i,a),t(this,"speed"),this.scene.physics.add.existing(this),this.scene.add.existing(this),null==(h=this.body)||h.setImmovable(!0).setAllowGravity(!1),this.speed=r.speed}}class n extends h{constructor(e,t,s,i){super(e,t,s,i)}move(){this.speed=r.speed,this.setVelocityX(-this.speed)}checkReset(e){return this.x<=-760&&(this.x=e.x+760,!0)}}class o{constructor(e){t(this,"backgrounds",[]),t(this,"currentLast");for(var s=0;s<7;s++)this.backgrounds.push(new n(e,764*s,512,"room1"));this.currentLast=this.backgrounds[this.backgrounds.length-1]}update(){for(var e=0;e<this.backgrounds.length;e++)if(this.backgrounds[e].move(),this.backgrounds[e].checkReset(this.currentLast))return void(this.currentLast=this.backgrounds[e])}}class l{static createAnim(e,t,s,i,a,r=12,h=!0,n=-1){e.anims.get(t)||e.anims.create({key:t,frames:e.anims.generateFrameNumbers(s,{start:i,end:a}),frameRate:r,repeat:h?n:0})}static play(e,t,s){if(e.anims.play(t,!0),!s)return;const i=e.anims.currentAnim;if(i&&s>=0&&s<i.frames.length){const t=i.frames[s];e.anims.setCurrentFrame(t)}}static playAnim(e,t,s){e.list.forEach(s=>{e.scene.anims.get(t+"_"+s.name)&&l.play(s,t+"_"+s.name)}),s&&e.list[0].once("animationcomplete-"+t+"_head",()=>s())}}class c extends h{constructor(e,s,i,a){super(e,s,i,a),t(this,"flipped",!1),t(this,"using",!1),t(this,"point",1),t(this,"coinsound"),this.CoinAnimInit(),this.coinsound=this.scene.sound.add("coinsound"),e.physics.add.overlap(this,e.player,()=>{r.collectCoin(this.point),this.kill(),this.coinsound.isPlaying||this.coinsound.play()})}update(){this.move(),this.x<=1e3&&!this.flipped&&this.using&&(l.play(this,"coin_flip"),this.flipped=!0),this.x<=-20&&this.kill()}move(){this.speed=r.speed,this.setVelocityX(-this.speed)}CoinAnimInit(){l.createAnim(this.scene,"coin_flip","coin",0,7,12,!1)}moveTo(e,t){this.x=e,this.y=t}kill(){this.using=!1,this.flipped=!1,this.disableBody(!0,!0)}}class d extends c{constructor(e,t,s,i){super(e,t,s,i),this.bigCoinAnimInit(),this.point=2}update(){this.move(),l.play(this,"big_coin_flip"),this.flipped=!0,this.x<=-20&&this.kill()}bigCoinAnimInit(){l.createAnim(this.scene,"big_coin_flip","bigcoin",0,7)}}const p=Object.freeze(Object.defineProperty({__proto__:null,dangPattern:[[1,1,0,0,0,1,0,0,1,0,0,1,0,0,1,1,1],[1,0,1,0,1,0,1,0,1,1,0,1,0,1,0,0,0],[1,0,1,0,2,1,1,0,1,0,1,1,0,1,0,1,1],[1,0,1,0,1,0,1,0,1,0,0,1,0,1,0,0,1],[1,1,0,0,1,0,1,0,1,0,0,2,0,1,1,1,1]],heartPattern:[[0,2,1,0,1,1,0],[1,1,1,1,1,1,1],[1,1,1,1,2,1,1],[0,1,1,1,1,1,0],[0,0,1,1,1,0,0],[0,0,0,1,0,0,0]],tileSkullBig:[[0,1,1,1,1,1,0],[1,2,1,1,1,2,1],[1,1,1,2,1,1,1],[1,1,1,1,1,1,1],[0,1,0,1,0,1,0],[0,1,1,0,1,1,0],[0,0,1,1,1,0,0]],tileStar:[[0,0,1,0,0],[0,1,2,1,0],[1,2,2,2,1],[0,1,2,1,0],[0,0,1,0,0]],tileStarBig:[[0,0,0,1,0,0,0],[0,0,1,2,1,0,0],[0,1,2,1,2,1,0],[1,2,1,2,1,2,1],[0,1,2,1,2,1,0],[0,0,1,2,1,0,0],[0,0,0,1,0,0,0]]},Symbol.toStringTag,{value:"Module"}));class y extends Phaser.GameObjects.Group{constructor(e){super(e),t(this,"bigPool"),this.bigPool=e.add.group(),this.bigPool.createMultiple({frameQuantity:100,key:"bigcoin",active:!1,visible:!1,classType:d}),this.createMultiple({frameQuantity:300,key:"coin",active:!1,visible:!1,classType:c})}update(){this.getChildren().forEach(e=>{e.update()}),this.bigPool.getChildren().forEach(e=>{e.update()})}test(e){const t=Object.values(p),s=Phaser.Math.RND.pick(t),i=300*Math.random()+300;this.spawnFromPattern(e,s,2e3,i,32)}spawnFromPattern(e,t,s,i,a=64){t.forEach((e,t)=>{e.forEach((e,r)=>{if(0===e)return;const h=s+r*a,n=i+t*a;if(1===e){const e=this.getFirstDead(!1);if(!e)return;e.moveTo(h,n),e.enableBody(!0,h,n,!0,!0).setVisible(!0),e.using=!0,e.move()}else if(2===e){const e=this.bigPool.getFirstDead(!1);if(!e)return;e.moveTo(h,n),e.enableBody(!0,h,n,!0,!0).setVisible(!0),e.using=!0,e.move()}})})}disableAll(){this.getChildren().forEach(e=>{e.body&&e.disableBody(!0,!0),e.setActive(!1).setVisible(!1),e.using=!1}),this.bigPool.getChildren().forEach(e=>{e.body&&e.disableBody(!0,!0),e.setActive(!1).setVisible(!1),e.using=!1})}}class u extends h{constructor(e,t,s,i){var a;super(e,t,s,i),this.scene.physics.add.existing(this),this.scene.add.existing(this),null==(a=this.body)||a.setAllowGravity(!1),this.speed=r.speed,this.move()}move(){this.speed=r.speed,this.body.setVelocityX(-this.speed)}}class g extends u{constructor(e,t,s,i){super(e,t,s,i),this.headAnimCreate(),l.play(this,"elechead"),this.scale=1,this.scene.physics.add.overlap(this,this.scene.player,()=>{this.scene.player.switchState("deadbyzap")})}headAnimCreate(){l.createAnim(this.scene,"elechead","elecOn",0,3)}}class m extends u{constructor(e,t,s,i){super(e,t,s,i),this.zapAnim(),l.play(this,"zapFX"),this.setScale(1,.5),this.scene.physics.add.overlap(this,this.scene.player,()=>{let e=this.scene.player;e.isdead||e.vehicle||e.switchState("deadbyzap")})}zapAnim(){l.createAnim(this.scene,"zapFX","zapFX",0,31)}}class f extends Phaser.GameObjects.Group{constructor(e){super(e),this.createMultiple({classType:m,key:"zap",frameQuantity:10,active:!1,visible:!1,setXY:{x:-1e3,y:-1e3}})}getZap(e,t,s){const i=this.getFirstDead(!1);if(i)return i.setActive(!0),i.setVisible(!0),i.setPosition(t,s),e.physics.world.enable(i),i;{const i=new m(e,t,s,"");return this.add(i),i}}returnZap(e){var t,s;e.setActive(!1),e.setVisible(!1),null==(t=e.body)||t.stop(),null==(s=e.body)||s.reset(-1e3,-1e3)}}class b extends Phaser.GameObjects.Container{constructor(e,s,i,a,r,h=!1,n=!1){super(e,s,i),t(this,"head"),t(this,"tail"),t(this,"zapfx"),t(this,"headfx"),t(this,"tailfx"),this.zapfx=new f(this.scene),n&&(r=0),h&&(a=0),this.animInit(),this.head=new g(e,0,0,""),this.tail=new g(e,a,r,""),this.calc(a,r),this.fxSetup(a,r),this.add([this.headfx,this.tailfx,...this.zapfx.getChildren(),this.head,this.tail]),this.rotateOrb(),e.add.existing(this)}rotateOrb(){const e=Phaser.Math.Angle.Between(this.head.x,this.head.y,this.tail.x,this.tail.y),t=Phaser.Math.RadToDeg(e);this.head.setAngle(t+90),this.tail.setAngle(t+180+90),this.zapfx.getChildren().forEach(e=>{e.setAngle(t)})}move(){this.head.move(),this.tail.move(),this.zapfx.getChildren().forEach(e=>{e.move()})}update(){this.active&&(this.tail.x<=-10-this.x&&this.deactivate(),this.headfx.setPosition(this.head.x,this.head.y),this.tailfx.setPosition(this.tail.x,this.tail.y))}animInit(){l.createAnim(this.scene,"elecglow","elecOnGlow",0,15)}fxSetup(e,t){this.headfx=this.scene.add.sprite(0,0,""),this.tailfx=this.scene.add.sprite(e,t,""),l.play(this.headfx,"elecglow"),l.play(this.tailfx,"elecglow")}calc(e,t){const s=Math.sqrt(e*e+t*t),i=Math.floor(s/32),a=Phaser.Math.Angle.Between(0,0,e,t);let h=t>0?1:-1;const n=32*Math.cos(a)-1,o=32*Math.sin(a)-h;for(let c=0;c<=i;c++){const e=n*c,t=o*c,s=this.zapfx.getZap(this.scene,e,t);if(s.setAngle(Phaser.Math.RadToDeg(a)),s.body instanceof Phaser.Physics.Arcade.Body){s.body.setAllowGravity(!1),s.body.setVelocityX(-r.speed);const e=s.width,t=s.height;s.body.setSize(e,t/4),s.body.setOffset(0,t/2-t/8)}l.play(s,"zapFX",c%32)}}reset(e,t,s,i,a=!1,r=!1){this.head.enableBody(),this.tail.enableBody(),this.setActive(!0),this.setPosition(e,t),r&&(i=0),a&&(s=0),this.head.setPosition(0,0),this.tail.setPosition(s,i),this.headfx.setPosition(this.head.x,this.head.y),this.tailfx.setPosition(this.tail.x,this.tail.x),this.calc(s+e-this.x,i+t-this.y),this.rotateOrb(),this.move()}deactivate(){this.head.disableBody(),this.tail.disableBody(),this.zapfx.getChildren().forEach(e=>{this.zapfx.returnZap(e)}),this.setActive(!1).setVisible(!1)}}class w extends Phaser.GameObjects.Group{constructor(e){super(e),this.createMultiple({classType:b,key:"elec",frameQuantity:5,active:!1,visible:!1})}getElec(e,t,s,i,a,r=!1,h=!1){let n=this.getFirstDead(!1);return n?(console.log("aaa"),n.setActive(!0),n.setVisible(!0),n.reset(t,s,i,a,r,h)):(n=new b(e,t,s,i,a,r,h),this.add(n),console.log("stupid")),n}returnElec(e){e.deactivate(),e.setActive(!1),e.setVisible(!1)}disableAll(){this.getChildren().forEach(e=>{this.returnElec(e)})}}class x extends i.Physics.Arcade.Sprite{constructor(e,s,i){super(e,s,i,"rocket"),t(this,"warning"),t(this,"waiting"),t(this,"explode"),t(this,"rocketfire"),t(this,"rockethead"),t(this,"warningsound"),t(this,"rocketexplodesound"),t(this,"missilelaunch"),e.add.existing(this),e.physics.add.existing(this),this.init(e),this.setupAnimations(e),this.setupPhysics(e)}init(e){this.setScale(2),this.setVisible(!1),this.disableBody(!0,!0),this.warning=e.add.sprite(this.scene.cameras.main.width-50,300,"warning"),this.warning.setVisible(!1),this.warning.scale=1.5,this.explode=e.add.sprite(this.scene.cameras.main.width+100,300,"explosion"),this.explode.setVisible(!1),this.explode.scale=1.5,this.rocketfire=e.add.sprite(1450,300,"rocketfire"),this.rocketfire.setVisible(!1),this.rocketfire.scale=1.5,this.rockethead=e.add.sprite(this.scene.cameras.main.width+100,300,"rocketfire"),this.rockethead.setVisible(!1),this.rockethead.scale=1.5,this.missilelaunch=this.scene.sound.add("rocketlaunch"),this.warningsound=this.scene.sound.add("rocketwarning"),this.rocketexplodesound=this.scene.sound.add("rocketexplode")}setupAnimations(e){l.createAnim(e,"rocket","rocket",0,3),l.createAnim(e,"warning","warning",0,3,12,!0,2),l.createAnim(e,"warning2","warning",4,7,12,!0,2),l.createAnim(e,"explode","explosion",0,7,12,!1),l.createAnim(e,"fire","rocketfire",0,3),l.createAnim(e,"rockethead","rocketfire",4,7),l.play(this,"rocket"),l.play(this.rocketfire,"fire"),l.play(this.rockethead,"rockethead")}setupPhysics(e){this.body.setAllowGravity(!1),e.physics.add.overlap(this,e.player,()=>{this.explosion(),e.player.switchState("deadbyrocket")})}explosion(){this.rocketexplodesound.play();let e=this.scene.player;this.explode.setPosition(e.x,e.y),this.explode.setVisible(!0),l.play(this.explode,"explode"),this.warning.once(Phaser.Animations.Events.ANIMATION_COMPLETE,()=>{this.explode.setVisible(!1)}),this.reset()}pending(){this.waiting=!0,this.enableBody(!0,1200,500,!0,!0).setVisible(!0),this.setVelocityX(0),this.x=2e3,this.warning.setVisible(!0),l.play(this.warning,"warning"),this.warning.once(Phaser.Animations.Events.ANIMATION_COMPLETE,()=>{l.play(this.warning,"warning2"),this.warningsound.play(),this.warning.once(Phaser.Animations.Events.ANIMATION_COMPLETE,()=>{this.waiting=!1,this.scene.time.delayedCall(0,()=>{this.shot()},[],this)})})}shot(){this.y=this.warning.y,this.missilelaunch.play(),this.setVelocityX(-1200-r.speed),this.warning.setVisible(!1)}preUpdate(e,t){super.preUpdate(e,t),this.rocketfire.setVisible(this.visible),this.rockethead.setVisible(this.visible),this.waiting&&(this.warning.y=this.scene.player.y),this.rocketfire.setPosition(this.x+32,this.y),this.rockethead.setPosition(this.x-16,this.y),this.x<-100&&this.reset()}reset(){this.setPosition(this.scene.cameras.main.width+100,500),this.setVelocityX(0),this.setVisible(!1),this.disableBody(!0,!0),this.rocketfire.setVisible(!1),this.rockethead.setVisible(!1)}}class k extends Phaser.GameObjects.Group{constructor(e){super(e),this.createMultiple({classType:x,key:"rocket",frameQuantity:5,active:!1,visible:!1})}getRocket(e){let t=this.getFirstDead(!1);return console.log(t),t||(t=new x(e,0,0),this.add(t)),t.pending(),t}returnRocket(e){e.reset(),e.setActive(!1),e.setVisible(!1)}disableAll(){this.getChildren().forEach(e=>{this.returnRocket(e)})}}class v{constructor(e){t(this,"scene"),this.scene=e}onExit(){}}class S extends v{constructor(e){super(e),t(this,"Aura"),t(this,"Trail"),t(this,"headstart_start"),t(this,"headstart_mid"),t(this,"headstart_lp"),t(this,"headstart_stop"),l.createAnim(this.scene,"aura","speedup",0,7),l.createAnim(this.scene,"trail","speedup",8,15),this.Aura=this.scene.add.sprite(0,0,"speedup").setVisible(!1).setScale(2,2),this.Trail=this.scene.add.sprite(0,0,"speedup").setVisible(!1).setScale(2,2),this.headstart_start=this.scene.sound.add("headstart_start"),this.headstart_start.on("complete",()=>{this.headstart_lp.play()}),this.headstart_mid=this.scene.sound.add("headstart_mid"),this.headstart_mid.on("complete",()=>{this.headstart_start.play()}),this.headstart_lp=this.scene.sound.add("headstart_lp",{loop:!0}),this.headstart_stop=this.scene.sound.add("headstart_stop")}onEnter(){this.headstart_start.play(),this.scene.player.setY(500),this.scene.player.body.setAllowGravity(!1).setVelocity(0,0),r.speed=4e3,this.Aura.setVisible(!0).setPosition(this.scene.player.x+50,this.scene.player.y),l.play(this.Aura,"aura"),this.Trail.setVisible(!0).setPosition(this.scene.player.x-50-126,this.scene.player.y),l.play(this.Trail,"trail"),this.scene.player.switchState("hold"),l.playAnim(this.scene.player.playerSprite,"flydown")}onUpdate(e,t){r.score+=Math.round(r.speed*t/1e3),this.scene.bg.update(),r.speed-=700*t/1e3,r.speed<300&&this.change(),this.scene.worker.forEach(e=>{e.update()})}onExit(){this.Aura.setVisible(!1),this.Trail.setVisible(!1)}change(){r.speed=300,this.scene.player.body.setAllowGravity(!0),this.scene.switchState("playing"),this.headstart_lp.stop(),this.headstart_stop.play()}}class A extends Phaser.GameObjects.Container{constructor(e,s){super(e),t(this,"bulletParticle"),t(this,"explode"),t(this,"bulletshell"),t(this,"player"),this.player=s,this.createParticle(),this.createExplode(),this.createShell(),this.player.add(this)}createParticle(){this.bulletParticle=this.scene.add.particles(0,0,"bullet",{follow:this.player,angle:{min:70,max:110},speed:2e3,scale:{start:2,end:2},alpha:{start:1,end:1},lifespan:1e3,frequency:50,quantity:1,emitting:!0})}stop(){this.bulletParticle.stop(),this.bulletshell.stop()}start(){this.bulletParticle.start(),this.bulletshell.start()}kill(){const e=this.bulletshell.overlap(this.player.scene.bot.body);e.length>0&&e.forEach(e=>{e.kill()});const t=this.bulletParticle.overlap(this.player.scene.bot.body);t.length>0&&t.forEach(e=>{this.explode.emitParticleAt(e.x,e.y),this.bulletshell.emitParticleAt(this.player.x,this.player.y+50),e.kill()})}createExplode(){this.explode=this.scene.add.particles(0,0,"bullet_fx",{frame:[0,1,2,3],emitting:!1,speed:0,scale:1.2,quantity:1,lifespan:50})}createShell(){this.bulletshell=this.scene.add.particles(0,0,"bulletshell",{emitting:!0,angle:{min:110,max:150},rotate:{min:0,max:360},scale:.5,speedX:-100,speedY:300,accelerationX:-1e3,accelerationY:600,quantity:1,lifespan:5e3})}}class _{constructor(e){t(this,"player"),this.player=e,this.animInit()}}class P extends _{constructor(e){super(e),t(this,"falling",!1),t(this,"jetFX"),t(this,"bulletParticle"),t(this,"shootingsound"),t(this,"stopsound"),this.bulletParticle||(this.bulletParticle=new A(this.player.scene,this.player)),this.shootingsound=this.player.scene.sound.add("shooting",{loop:!0}),this.stopsound=this.player.scene.sound.add("stopshooting"),this.bulletParticle.stop()}onEnter(){this.jetFX||this.createJetFX(),this.player.scene.tweens.add({targets:this.jetFX,alpha:{from:1,to:0},loop:-1,duration:100}),this.flyup()}onUpdate(...e){this.player.controller.jetLaunch(),this.checkFall(),this.falling||this.flyup(),this.bulletParticle.kill()}setFXVisible(e){this.jetFX.setVisible(e)}flyup(){this.shootingsound.isPlaying||this.shootingsound.play(),this.setFXVisible(!0),l.playAnim(this.player.playerSprite,"flyup"),this.bulletParticle.start()}onExit(){this.setFXVisible(!1),this.player.body.setVelocityY(0),this.bulletParticle.stop(),this.stopsound.stop(),this.shootingsound.stop()}animInit(){this.flyUpAnimInit(),this.flyDownAnimInit(),this.jetFXAnim()}flyUpAnimInit(){l.createAnim(this.player.scene,"flyup_head","player_head",4,7,24),l.createAnim(this.player.scene,"flyup_body","player_body",4,7,24),l.createAnim(this.player.scene,"flyup_jetpack","player_jetpack",4,7,24)}flyDownAnimInit(){l.createAnim(this.player.scene,"flydown_head","player_head",8,11,12,!1),l.createAnim(this.player.scene,"flydown_body","player_body",8,11,12,!1),l.createAnim(this.player.scene,"flydown_jetpack","player_jetpack",8,11,12,!1)}createJetFX(){this.jetFX=this.player.scene.add.sprite(0,0,""),console.log(this.player.list),this.player.playerSprite.add(this.jetFX),this.jetFX.setName("jetfx"),this.jetFX.scale=.4,this.jetFX.y=24}jetFXAnim(){l.createAnim(this.player.scene,"flyup_jetfx","jet_fx",0,3,24),l.createAnim(this.player.scene,"flyup_bulletfx","bullet_fx",0,3,24)}checkFall(){const e=this.player.body;e.velocity.y>50&&!this.falling&&(this.falling=!0,l.playAnim(this.player.playerSprite,"flydown"),this.setFXVisible(!1),this.bulletParticle.stop(),this.stopsound.play(),this.shootingsound.stop()),e.velocity.y<=50&&(this.falling=!1)}}class O extends Phaser.GameObjects.Container{constructor(e){super(e.scene),t(this,"workerHead"),t(this,"workerBody"),t(this,"workerJetpack"),this.AnimInit(),this.scene=e.scene,this.addHead(),this.addBody(),e.add(this),this.scale=4,this.start()}flip(e,t){this.list.forEach(s=>{s.setFlip(e,t)})}start(){switch(Phaser.Math.Between(0,1)){case 0:l.playAnim(this,"walking");break;case 1:l.playAnim(this,"running")}}showAll(e=!0,t=!0,s=!0){this.workerHead.setVisible(e),this.workerBody.setVisible(t),this.workerJetpack.setVisible(s)}addBody(){this.workerBody=this.scene.add.sprite(10,5,"worker_body"),this.add(this.workerBody),this.workerBody.setName("workerbody")}addHead(){this.workerHead=this.scene.add.sprite(10,-8,"worker_head"),this.add(this.workerHead),this.workerHead.setName("workerhead")}AnimInit(){l.createAnim(this.scene,"walking_workerhead","worker_head",0,3),l.createAnim(this.scene,"walking_workerbody","worker_body",0,3),l.createAnim(this.scene,"running_workerhead","worker_head",4,7),l.createAnim(this.scene,"running_workerbody","worker_body",4,7),l.createAnim(this.scene,"dead_workerhead","worker_head",0,0),l.createAnim(this.scene,"dead_workerbody","worker_body",0,0)}}class B extends Phaser.GameObjects.Container{constructor(e,s,i){var a;super(e,s,i),t(this,"workerSprite"),t(this,"offset",1),t(this,"player"),t(this,"dead",!1),t(this,"speed",0),this.workerSprite=new O(this),this.add(this.workerSprite),this.scene.add.existing(this),this.scale=.5,this.setupBody(),this.move(),this.player=this.scene.player,this.body&&this.workerSprite.flip((null==(a=this.body)?void 0:a.velocity.x)<0,!1)}setupBody(){this.scene.physics.add.existing(this),this.body.setSize(70,128).setOffset(0,-64),this.scene.physics.add.collider(this,this.scene.bot)}move(){if(console.log(this.scene.currentState instanceof S),this.scene.currentState instanceof S||this.dead)return this.body.setVelocityX(-r.speed),void(this.speed=0);0==this.speed&&(this.speed=Phaser.Math.Between(r.speed,r.speed+100)),this.body.setVelocityX(this.offset*this.speed)}rest(){0===Phaser.Math.Between(0,1)?(this.x=Phaser.Math.Between(-300,-50),this.offset=1):(this.x=Phaser.Math.Between(this.scene.cameras.main.width+50,this.scene.cameras.main.width+300),this.offset=-1),this.body.setVelocity(0,0),this.dead=!1,this.setRotation(0),this.workerSprite.start(),this.speed=Phaser.Math.Between(r.speed,r.speed+100)}update(){var e;(this.x<-400||this.x>this.scene.cameras.main.width+400)&&this.rest(),this.dead&&(this.setRotation(Phaser.Math.DegToRad(90)),l.playAnim(this.workerSprite,"dead")),this.move(),this.body&&this.workerSprite.flip((null==(e=this.body)?void 0:e.velocity.x)<0,!1),this.body.setGravity(0,900),this.x>2e3&&(this.x=-100,this.workerSprite.start(),this.move()),this.x>this.player.x-50&&this.x<=this.player.x+50&&this.player.currentState instanceof P&&!this.player.currentState.falling&&(this.dead=!0)}}class E extends Phaser.GameObjects.Sprite{constructor(e,s,i){super(e,0,0,s),t(this,"player"),this.animInit(),this.player=i,i.playerSprite.add(this),i.scene.add.existing(this)}animInit(){}control(){}}class V extends E{constructor(e,t){super(e,"gravitysuit",t),this.setName("gravitysuit")}animInit(){l.createAnim(this.scene,"walking_gravitysuit","gravitysuit",0,5),l.createAnim(this.scene,"landing_gravitysuit","gravitysuit",18,21,12,!1),l.createAnim(this.scene,"flip_gravitysuit","gravitysuit",6,17,12,!0)}control(){this.player.controller.gravChange(!0),0!=this.player.body.velocity.y&&(this.player.switchState("hold"),l.play(this,"flip_gravitysuit"))}}class M{constructor(e,s){var i;t(this,"player"),t(this,"scene"),t(this,"spaceBar"),this.player=s,this.scene=e,this.spaceBar=null==(i=e.input.keyboard)?void 0:i.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE),this.scene.input.on("pointerdown",e=>{s.vehicle instanceof V&&e.leftButtonDown()&&(this.gravChange(!1),this.player.playerSprite.flip(!1,this.scene.physics.world.gravity.y<0))})}jetLaunch(){var e;if(this.player.isdead)return;const t=this.scene.input.activePointer.isDown||(null==(e=this.spaceBar)?void 0:e.isDown);this.player.body.setAccelerationY(t?-3e3:0)}gravChange(e){if(this.player.isdead)return!1;if(this.spaceBar){if(!e){const e=this.scene.physics.world.gravity.y;return this.scene.physics.world.gravity.y=-e,!0}if(Phaser.Input.Keyboard.JustDown(this.spaceBar)){const e=this.scene.physics.world.gravity.y;return this.scene.physics.world.gravity.y=-e,this.player.playerSprite.flip(!1,this.scene.physics.world.gravity.y<0),!0}}return!1}toggleGravity(){if(this.player.isdead)return;const e=this.scene.physics.world.gravity.y;this.scene.physics.world.gravity.y=-e}}class C extends Phaser.GameObjects.Container{constructor(e){super(e.scene),t(this,"playerHead"),t(this,"playerBody"),t(this,"playerJetpack"),this.scene=e.scene,this.addHead(),this.addBody(),this.addJetPack(),e.add(this),this.scale=4}flip(e,t){this.list.forEach(s=>{s.setFlip(e,t)})}showAll(e=!0,t=!0,s=!0){this.playerHead.setVisible(e),this.playerBody.setVisible(t),this.playerJetpack.setVisible(s)}addBody(){this.playerBody=this.scene.add.sprite(10,5,"player_body"),this.add(this.playerBody),this.playerBody.setName("body")}addHead(){this.playerHead=this.scene.add.sprite(10,-8,"player_head"),this.add(this.playerHead),this.playerHead.setName("head")}addJetPack(){this.playerJetpack=this.scene.add.sprite(0,5,"player_jetpack"),this.add(this.playerJetpack),this.playerJetpack.setName("jetpack")}}class T extends _{constructor(){super(...arguments),t(this,"progress",0)}onEnter(){l.playAnim(this.player.playerSprite,"dead"),r.speed=200,this.player.playerSprite.setRotation(Phaser.Math.DegToRad(-90)),this.player.playerSprite.y+=50,this.player.body.setAcceleration(0,0),this.player.scene.zapManager.disableAll(),this.player.scene.rockets.disableAll()}onUpdate(...e){r.speed<100&&this.player.scene.switchState("over")}onExit(){this.player.playerSprite.y-=50,this.player.playerSprite.setRotation(Phaser.Math.DegToRad(0))}animInit(){this.createDeadAnim()}createDeadAnim(){l.createAnim(this.player.scene,"dead_head","player_head",24,31,12,!1),l.createAnim(this.player.scene,"dead_body","player_body",24,31,12,!1)}}class I extends _{constructor(){super(...arguments),t(this,"progress",0)}onEnter(){if(null!=this.player.vehicle)return this.player.vehicle=null,this.player.switchState("reborn"),console.log("pppp"),this.player.scene.zapManager.disableAll(),void this.player.scene.rockets.disableAll();this.progress=0,this.player.playerSprite.playerJetpack.setVisible(!1),this.player.isdead=!0,this.player.scene.cameras.main.shake(250,.01),l.playAnim(this.player.playerSprite,"deadrocket",()=>{this.player.switchState("dead")})}onUpdate(...e){this.player.body.velocity.y<0&&this.player.body.setVelocityY(0)}onExit(){}animInit(){this.createDeadAnim()}createDeadAnim(){l.createAnim(this.player.scene,"deadrocket_head","player_head",20,23,12,!1),l.createAnim(this.player.scene,"deadrocket_body","player_body",20,23,12,!1)}}class F extends _{constructor(){super(...arguments),t(this,"progress",0),t(this,"sound")}onEnter(){if(this.sound||(this.sound=this.player.scene.sound.add("playerelec")),null!=this.player.vehicle)return this.player.vehicle=null,this.player.switchState("reborn"),console.log("pppp"),this.player.scene.zapManager.disableAll(),void this.player.scene.rockets.disableAll();this.progress=0,this.player.playerSprite.playerJetpack.setVisible(!1),this.player.isdead=!0,this.player.scene.cameras.main.shake(250,.01),this.sound.play(),l.playAnim(this.player.playerSprite,"deadzap",()=>{this.player.switchState("dead")})}onUpdate(...e){this.player.body.velocity.y<0&&this.player.body.setVelocityY(0)}onExit(){}animInit(){this.createZapDeadAnim()}createZapDeadAnim(){l.createAnim(this.player.scene,"deadzap_head","player_head",16,19,12,!1),l.createAnim(this.player.scene,"deadzap_body","player_body",16,19,12,!1)}}class j extends _{onEnter(){}onUpdate(...e){}onExit(){}animInit(){}createZapDeadAnim(){}}class L extends _{constructor(){super(...arguments),t(this,"hit")}onEnter(){this.hit||(this.hit=this.player.scene.sound.add("hit")),this.player.playerSprite.flip(!1,!1),this.player.scene.physics.world.gravity.y=900,this.player.scene.cameras.main.shake(500,.02),this.player.scene.cameras.main.flash(500,255,255,255),this.hit.play(),this.player.playerSprite.showAll(),this.player.playerSprite.list.pop()}onUpdate(...e){}onExit(){}animInit(){}}class X extends E{constructor(e,t){super(e,"",t)}control(){console.log("aaa"),this.player.controller.jetLaunch(),this.player.body.velocity.y<0&&this.player.switchState("flying")}}class z extends _{constructor(){super(...arguments),t(this,"vehicles"),t(this,"currentVehicle")}onEnter(){this.player.scene.cameras.main.shake(250,.01,!0,()=>{this.player.scene.cameras.main.shake(250,.01)}),this.player.body.setAcceleration(0,0),this.player.playerSprite.showAll(!1,!1,!1),this.vehicleInit(),this.currentVehicle=this.vehicles[1],this.player.playerSprite.add(this.currentVehicle),this.player.vehicle=this.currentVehicle,this.player.scene.cameras.main.flash(500,255,255,255)}onUpdate(e,t){}animInit(){}onExit(){}vehicleInit(){this.vehicles||(this.vehicles=[],this.vehicles.push(new X(this.player.scene,this.player)),this.vehicles.push(new V(this.player.scene,this.player)))}}class G extends _{constructor(e){super(e),t(this,"runsound",[]);for(let t=1;t<5;t++)this.runsound[t]=this.player.scene.sound.add("run_"+String(t)),this.runsound[t].on("complete",()=>{this.runsound[4==t?1:t+1].isPlaying||this.runsound[4==t?1:t+1].play()})}onEnter(){l.playAnim(this.player.playerSprite,"landing",()=>{var e;0==(null==(e=this.player.body)?void 0:e.velocity.y)&&l.playAnim(this.player.playerSprite,"walking")}),this.runsound[1].play()}onUpdate(...e){null===this.player.vehicle?(console.log("aaa"),this.player.controller.jetLaunch(),this.player.body.velocity.y<0&&this.player.switchState("flying")):(this.player.vehicle.control(),console.log("control;"))}onExit(){this.runsound.forEach(e=>{e.stop()})}animInit(){this.landingInit(),this.walkingAnimInit()}walkingAnimInit(){l.createAnim(this.player.scene,"walking_head","player_head",0,3),l.createAnim(this.player.scene,"walking_body","player_body",0,3),l.createAnim(this.player.scene,"walking_jetpack","player_jetpack",0,3)}landingInit(){l.createAnim(this.player.scene,"landing_head","player_head",12,15,12,!1),l.createAnim(this.player.scene,"landing_body","player_body",12,15,12,!1),l.createAnim(this.player.scene,"landing_jetpack","player_jetpack",12,15,12,!1)}}class H extends Phaser.GameObjects.Container{constructor(e,s,i){super(e,s,i),t(this,"isdead",!1),t(this,"shadowSprite"),t(this,"playerSprite"),t(this,"currentState"),t(this,"controller"),t(this,"states"),t(this,"onGround",!1),t(this,"vehicle"),this.setupBody(),this.setUpSprite(),this.vehicle=null,this.stateInit(),this.controller=new M(this.scene,this),this.scene.add.existing(this),this.switchState("hold"),this.scale=.5,this.setDepth(111)}rest(){this.setPosition(this.x,this.y-10),this.setVisible(!1),this.switchState("hold"),this.playerSprite.showAll(),this.isdead=!1}update(e,t){var s;this.onGround=this.body.blocked.down,this.shadowSprite.setVisible(this.visible),super.update(e,t),0!=(null==(s=this.body)?void 0:s.velocity.y)&&(this.onGround=!1),this.currentState&&this.currentState.onUpdate(e,t),this.shadowSprite.x=this.x,this.shadowSprite.scale=(this.y+300)/350}switchState(e){"walking"==e&&this.isdead||this.currentState!==this.states[e]&&(this.currentState&&this.currentState.onExit(),this.currentState=this.states[e],this.currentState.onEnter())}setUpSprite(){this.shadowSprite=this.scene.add.sprite(0,0,"shadow"),this.playerSprite=new C(this),this.shadowSprite.x=this.x+20,this.shadowSprite.y=750,this.shadowSprite.setAlpha(.5)}resetBody(){this.body.setSize(70,128).setOffset(0,-64)}setupBody(){this.scene.physics.add.existing(this),this.body.setSize(70,128).setOffset(0,-64)}stateInit(){this.states={walking:new G(this),flying:new P(this),deadbyzap:new F(this),deadbyrocket:new I(this),dead:new T(this),upgrade:new z(this),hold:new j(this),reborn:new L(this)}}}class U extends v{constructor(){super(...arguments),t(this,"rescueOverlay"),t(this,"rescueCostText")}onEnter(){if(this.scene.player.body.setAllowGravity(!1),this.scene.zapManager.disableAll(),this.scene.rockets.disableAll(),this.scene.coinManager.disableAll(),this.scene.worker.forEach(e=>{e.rest()}),this.scene.player.rest(),this.scene.dieOnce||r.maxCoin<1e3)return this.hideRescueOverlay(),void this.transitionToPending();this.scene.dieOnce=!0,this.ensureRescueOverlay(),this.showRescueOverlay(),this.animateRescueOverlay()}transitionToPending(e=100){this.scene.time.delayedCall(e,()=>{this.scene.player.setVisible(!0),this.scene.player.setPosition(-500,500),this.scene.switchState("pending")})}ensureRescueOverlay(){if(this.rescueOverlay)return;const e=this.scene.cameras.main.centerX;this.rescueOverlay=this.scene.add.sprite(e,500,"revive").setInteractive().setAlpha(0),this.rescueOverlay.on("pointerdown",()=>{this.scene.switchState("playing"),this.scene.player.switchState("flying"),r.speed=300,r.payCoin(1e3),this.scene.cameras.main.flash(500,255,255,255),this.scene.cameras.main.shake(250,.01),this.hideRescueOverlay(),this.scene.tweens.killTweensOf(this.rescueOverlay)}),this.rescueCostText=this.scene.add.text(this.scene.cameras.main.width/2,550,"1000\n",{fontSize:"40px",fontFamily:"Courier",color:"#ffff00",align:"center",fontStyle:"bold",stroke:"#000000",strokeThickness:5}).setOrigin(.5)}showRescueOverlay(){var e,t;null==(e=this.rescueOverlay)||e.setActive(!0).setVisible(!0),null==(t=this.rescueCostText)||t.setActive(!0).setVisible(!0)}hideRescueOverlay(){var e,t;null==(e=this.rescueOverlay)||e.setActive(!1).setVisible(!1),null==(t=this.rescueCostText)||t.setActive(!1).setVisible(!1)}animateRescueOverlay(){this.rescueOverlay&&this.rescueCostText&&(this.scene.tweens.killTweensOf([this.rescueOverlay,this.rescueCostText]),this.scene.tweens.add({targets:[this.rescueOverlay],alpha:{from:0,to:1},duration:1e3,yoyo:!0,loop:2,onComplete:()=>{this.hideRescueOverlay(),this.transitionToPending()}}))}onUpdate(e,t){}onExit(){this.scene.player.body.setAllowGravity(!0)}}class R extends Phaser.GameObjects.Container{constructor(e,s,i,a,r){super(e,s,i),t(this,"border",[[]]),this.scene.add.existing(this),this.border[0].push(this.scene.add.sprite(-a/2-7.5,-r/2-7.5,"containerEdge")),this.border[0].push(this.scene.add.sprite(0,-r/2-7.5,"containerTop").setScale(a/34,1)),this.border[0].push(this.scene.add.sprite(a/2+7.5,-r/2-7.5,"containerEdge").setFlipX(!0)),this.border.push([]),this.border[1].push(this.scene.add.sprite(-a/2-7.5,0,"containerLeft").setScale(1,r/34)),this.border[1].push(this.scene.add.sprite(0,0,"containerFiller").setScale(a,r)),this.border[1].push(this.scene.add.sprite(a/2+7.5,0,"containerLeft").setScale(1,r/34).setFlipX(!0)),this.border.push([]),this.border[2].push(this.scene.add.sprite(-a/2-7.5,r/2+7.5,"containerEdge").setFlip(!1,!0)),this.border[2].push(this.scene.add.sprite(0,r/2+7.5,"containerTop").setScale(a/34,1).setFlip(!1,!0)),this.border[2].push(this.scene.add.sprite(a/2+7.5,r/2+7.5,"containerEdge").setFlip(!0,!0)),this.border.forEach(e=>{e.forEach(e=>{this.add(e),console.log(e)})})}}class D extends Phaser.GameObjects.Container{constructor(e){super(e),t(this,"logo"),t(this,"center"),t(this,"text"),t(this,"cointext"),t(this,"scoretext"),t(this,"coinLayout"),this.center={x:this.scene.cameras.main.width/2,y:this.scene.cameras.main.height/2},this.addLogo(),this.addText(),this.addCoinText(),this.addScoreText(),this.addBox(),this.scene.add.existing(this),this.setDepth(1e4)}resettext(){this.cointext.text=String(localStorage.getItem("coin")),this.scoretext.text=String(localStorage.getItem("score"))}addCoinText(){let e=r.maxCoin;this.cointext=this.scene.add.text(0,-10,String(e),{fontSize:"20px",fontFamily:"Courier",color:"#ffff00",align:"center",fontStyle:"bold",stroke:"#000000",strokeThickness:5}).setOrigin(.5)}addScoreText(){let e=r.maxScore;this.scoretext=this.scene.add.text(0,10,String(e),{fontSize:"20px",fontFamily:"Courier",color:"#ffffff",align:"center",fontStyle:"bold",stroke:"#000000",strokeThickness:5}).setOrigin(.5)}addBox(){this.coinLayout=new R(this.scene,this.center.x-100,300-this.center.y,100,50),this.add(this.coinLayout),this.coinLayout.add(this.cointext),this.coinLayout.add(this.scoretext)}addText(){this.text=this.scene.add.text(0,200,"TOUCH ANYWHERE TO PLAY!",{fontSize:"30px",fontFamily:"Courier",color:"#ffffff",align:"center",fontStyle:"bold",stroke:"#000000",strokeThickness:5}).setOrigin(.5),this.scene.tweens.add({targets:this.text,alpha:{from:0,to:1},duration:1e3,yoyo:!0,repeat:-1}),this.add(this.text)}addLogo(){this.setPosition(this.center.x,this.center.y),this.logo=this.scene.add.sprite(0,0,"jetlogo"),this.scene.tweens.add({targets:this.logo,alpha:{from:0,to:1},duration:1e3}),this.add(this.logo)}}class N extends v{constructor(e){super(e),t(this,"playingsound"),t(this,"startOverlay"),t(this,"explode"),t(this,"explodesound"),this.explodesound=this.scene.sound.add("smash"),this.playingsound=this.scene.sound.add("menuBGM",{loop:!0}),this.startOverlay=new D(this.scene),this.startOverlay.setVisible(!1),this.explode=this.scene.add.particles(-15,700,"dust",{angle:{min:-110,max:110},speed:300,scale:{min:1,max:2},rotate:{min:0,max:360},alpha:{start:1,end:0},lifespan:1e3,frequency:50,quantity:5,emitting:!1}),this.scene.tweens.add({targets:this.startOverlay,alpha:{from:0,to:1},duration:1e3})}onEnter(){this.startOverlay.resettext(),this.scene.dieOnce=!1,this.scene.played=!1,this.scene.worker.forEach(e=>{e.rest()}),this.playingsound.isPlaying||this.playingsound.play(),this.scene.player.body.setAllowGravity(!1),r.speed=0,this.scene.tweens.add({targets:this.startOverlay,alpha:{from:0,to:1},duration:1e3}),this.startOverlay.setVisible(!0),this.scene.input.once("pointerdown",()=>{this.explode.start(),this.explodesound.play(),this.scene.player.body.setAllowGravity(!0),this.scene.cameras.main.shake(250,.01),this.scene.player.body.setVelocityX(300),this.scene.tweens.add({targets:this.startOverlay,alpha:{from:1,to:0},duration:1e3,onComplete:()=>{this.explode.stop(),this.startOverlay.setVisible(!1)}})})}onUpdate(e,t){this.scene.bg.update(),this.startOverlay.update(),this.scene.player.x>=300&&this.scene.switchState("playing")}onExit(){this.playingsound.stop(),this.startOverlay.setVisible(!1),r.speed=300,this.scene.player.body.setVelocityX(0),r.score=0,r.coin=0}}class W extends h{constructor(e,s,i){super(e,s,i,"upgrade"),t(this,"upgradesound"),this.createUpgradeAnim(),this.upgradesound=this.scene.sound.add("powerup"),l.play(this,"upgrade"),this.scene.physics.add.overlap(this,this.scene.player,()=>{this.scene.player.isdead||this.onCollect()}),this.scale=.8,console.log("Upgrade created at",s,i)}preUpdate(e,t){super.preUpdate(e,t),this.x<-1e3&&this.disableBody(!0,!0).setVisible(!1)}move(){this.speed=r.speed,this.body.setVelocityX(-this.speed)}createUpgradeAnim(){l.createAnim(this.scene,"upgrade","upgrade",0,7)}onCollect(){this.upgradesound.play(),this.disableBody(!0,!0).setVisible(!1),this.scene.player.switchState("upgrade")}create(e,t){this.setVisible(!0),this.enableBody(!0,e,t,!0,!0),l.play(this,"upgrade"),this.move()}}class J extends v{constructor(e){super(e),t(this,"scoreBox"),t(this,"scoretext"),t(this,"cointext"),t(this,"upgrade"),t(this,"Booster"),t(this,"price"),t(this,"elec",[]),t(this,"progress"),t(this,"playingsound"),this.playingsound=this.scene.sound.add("playingBGM",{loop:!0}),this.addText(),this.scoreBox=new R(this.scene,100,200,100,50).setVisible(!1),this.scoreBox.add(this.scoretext),this.scoreBox.add(this.cointext),this.upgrade=new W(this.scene,Phaser.Math.Between(5e3,1e4),500),this.Booster=this.scene.add.sprite(this.scene.cameras.main.width/2,500,"booster"),this.price=this.scene.add.text(this.scene.cameras.main.width/2,550,"1000",{fontSize:"40px",fontFamily:"Courier",color:"#ffff00",align:"center",fontStyle:"bold",stroke:"#000000",strokeThickness:5}).setOrigin(.5),this.price.setVisible(!1),this.Booster.once("pointerdown",()=>{console.log("Booster clicked"),this.Booster.setActive(!1).setVisible(!1),this.scene.switchState("dashing"),this.scene.played=!0,this.price.setVisible(!1),r.payCoin(1e3)}),this.Booster.setActive(!1).setVisible(!1)}onEnter(){this.upgrade.setPosition(Phaser.Math.Between(5e3,1e4),500),this.scene.player.setVisible(!0),this.playingsound.isPlaying||this.playingsound.play(),this.scoreBox.setVisible(!0),!this.scene.played&&r.maxCoin>=1e3&&(this.Booster.setActive(!0).setVisible(!0).setInteractive(),this.scene.tweens.add({targets:this.Booster,alpha:{from:0,to:1},yoyo:!0,duration:1e3,loop:2,onComplete:()=>{this.Booster.setActive(!1).setVisible(!1),this.scene.played=!0,this.price.setVisible(!1)}}),this.price.setVisible(!0)),this.scene.played=!0}onUpdate(e,t){if(this.scene.worker.forEach(e=>{e.update()}),this.upgrade.move(),this.scene.coinManager.update(),this.scoretext.text=String(r.score),this.cointext.text=String(r.coin),this.scene.bg.update(),this.scene.player.update(e,t),this.scene.progress+=t,this.progress+=t,r.score+=Math.round(r.speed*t/1e3),r.score>r.maxScore&&r.setHighScore(),this.scene.progress>=2e3&&(r.speed+=this.scene.player.isdead?-100:5,r.speed=Math.max(0,r.speed),this.scene.progress=0,!this.scene.player.isdead))switch(Phaser.Math.Between(0,2)){case 0:this.scene.coinManager.test(this.scene);break;case 1:this.RandomElec();break;case 2:this.scene.rockets.getRocket(this.scene)}this.scene.zapManager.getChildren().forEach(e=>{e.update()})}RandomElec(){let e=Phaser.Math.Between(0,2),t=Phaser.Math.Between(Math.max(this.scene.player.y-100,250),Math.min(800,this.scene.player.y+100));return 0==e?this.scene.zapManager.getElec(this.scene,2e3,t,Phaser.Math.Between(100,200),0===Phaser.Math.Between(0,1)?Phaser.Math.Between(-200,-100):Phaser.Math.Between(100,200)):1==e?this.scene.zapManager.getElec(this.scene,2e3,t,Phaser.Math.Between(100,200),0):this.scene.zapManager.getElec(this.scene,2e3,t,0,0===Phaser.Math.Between(0,1)?Phaser.Math.Between(-200,-100):Phaser.Math.Between(100,100))}onExit(){this.upgrade.setPosition(Phaser.Math.Between(5e3,1e4),500),this.playingsound.stop(),this.scoreBox.setVisible(!1),this.scene.coinManager.disableAll(),this.scene.zapManager.disableAll(),this.scene.rockets.disableAll()}addText(){let e=r.score;this.scoretext=this.scene.add.text(0,10,String(e),{fontSize:"20px",fontFamily:"Courier",color:"#ffffff",align:"center",fontStyle:"bold",stroke:"#000000",strokeThickness:5}).setOrigin(.5);let t=r.coin;this.cointext=this.scene.add.text(0,-10,String(t),{fontSize:"20px",fontFamily:"Courier",color:"#fff000",align:"center",fontStyle:"bold",stroke:"#000000",strokeThickness:5}).setOrigin(.5)}}class Z extends Phaser.Scene{constructor(){super("GameScene"),t(this,"worker",[]),t(this,"played",!1),t(this,"bg"),t(this,"player"),t(this,"progress",0),t(this,"bot"),t(this,"coinManager"),t(this,"currentState"),t(this,"states"),t(this,"zapManager"),t(this,"rockets"),t(this,"startOverlay"),t(this,"dieOnce",!1)}preload(){this.LoadBodySprite(),this.LoadHeadSprite(),this.LoadJetPack(),this.LoadCoin(),this.LoadElec(),this.LoadUI(),this.LoadAudio(),this.LoadUpgrade(),this.LoadUpgradeComponents(),this.LoadParticle(),this.load.image("room1","assets/Levels/Room1/room1_1.png"),this.load.image("shadow","assets/Characters/effect_shadow.png"),this.load.image("bullet","assets/Characters/Effects/effect_smgbullet.png"),this.load.image("bulletshell","assets/Characters/Effects/shell.png")}create(){this.played=!1,this.cameras.main.setViewport(0,-128,1720,1080),r.speed=300,this.bg=new o(this),this.player=new H(this,-500,500),this.createBot(),this.createTop(),this.coinManager=new y(this);for(var e=0;e<5;e++)this.worker.push(new B(this,2e3,600));this.worker.forEach(e=>{e.rest()}),this.stateInit(),this.zapManager=new w(this),this.rockets=new k(this),this.switchState("pending")}switchState(e){this.currentState!==this.states[e]&&(this.currentState&&this.currentState.onExit(),this.currentState=this.states[e],this.currentState.onEnter())}update(e,t){this.currentState.onUpdate(e,t)}createBot(){this.bot=new Phaser.GameObjects.Rectangle(this,100,1e3,8e3,500),this.physics.add.existing(this.bot),this.physics.add.collider(this.bot,this.player,()=>{this.player.switchState("walking")}),this.bot.body.setImmovable(!0).setAllowGravity(!1),this.add.existing(this.bot)}createTop(){let e=new Phaser.GameObjects.Rectangle(this,400,20,3e3,500);this.physics.add.existing(e),this.physics.add.collider(e,this.player,()=>{this.player.vehicle instanceof V&&this.player.switchState("walking")}),e.body.setImmovable(!0).setAllowGravity(!1),this.add.existing(e)}stateInit(){this.states={pending:new N(this),playing:new J(this),dashing:new S(this),over:new U(this)}}LoadUpgrade(){this.load.spritesheet("upgrade","assets/Pickup/pickup.png",{frameWidth:128,frameHeight:128}),this.load.image("booster","assets/new/skip.png")}LoadBodySprite(){this.load.spritesheet("player_body","assets/Characters/Barry/defaultBody.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("worker_body","assets/workers/worker1Body.png",{frameWidth:32,frameHeight:32})}LoadHeadSprite(){this.load.spritesheet("player_head","assets/Characters/Barry/defaultHead.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("worker_head","assets/workers/worker1Head.png",{frameWidth:32,frameHeight:32})}LoadJetPack(){this.load.spritesheet("player_jetpack","assets/Characters/Jetpacks/jetpackDefault.png",{frameWidth:32,frameHeight:44}),this.load.spritesheet("jet_fx","assets/Characters/Effects/jetfx.png",{frameWidth:64,frameHeight:64}),this.load.spritesheet("bullet_fx","assets/Characters/Effects/bulletfx.png",{frameWidth:64,frameHeight:64})}LoadCoin(){this.load.spritesheet("coin","assets/Entities/coin_sheet.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("bigcoin","assets/new_feature/coinAlt.png",{frameWidth:32,frameHeight:32})}LoadElec(){this.load.spritesheet("elecOn","assets/Obstacles/Zapper/orbAnim.png",{frameWidth:62,frameHeight:42}),this.load.spritesheet("elecOnGlow","assets/Obstacles/Zapper/RegularZappers/glow.png",{frameWidth:128,frameHeight:128}),this.load.spritesheet("zapFX","assets/Obstacles/Zapper/RegularZappers/zapEffect.png",{frameWidth:32,frameHeight:117}),this.load.spritesheet("rocket","assets/Obstacles/Missile/missile.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("warning","assets/Obstacles/Missile/missileAlert.png",{frameWidth:64,frameHeight:64}),this.load.spritesheet("explosion","assets/Obstacles/Missile/missileExplosion.png",{frameWidth:64,frameHeight:64})}LoadUI(){this.load.image("jetlogo","assets/Levels/Title/Objects/title_small.png"),this.load.image("containerEdge","assets/UI/container/edge.png"),this.load.image("containerFiller","assets/UI/container/filler.png"),this.load.image("containerLeft","assets/UI/container/left.png"),this.load.image("containerTop","assets/UI/container/top.png"),this.load.image("revive","assets/new/reviveIcon_TVOS.png")}LoadAudio(){this.load.audio("shooting","assets/SFX/Jetpack/jetpack_fireLP.mp3"),this.load.audio("stopshooting","assets/SFX/Jetpack/Jetpack_stop.mp3");for(let e=1;e<5;e++)this.load.audio(`run_${e}`,[`assets/SFX/Barry/run_metal_left_${e}.mp3`]);this.load.audio("playingBGM","assets/BGM/Music_Level.mp3"),this.load.audio("menuBGM","assets/BGM/Music_Menu.mp3"),this.load.audio("powerup","assets/SFX/Effects/game.mp3"),this.load.audio("coinsound","assets/SFX/Obstacle/Coin/coin_pickup_1.mp3"),this.load.audio("smash","assets/SFX/Environtment/window_smash.mp3"),this.load.audio("playerelec","assets/SFX/Barry/Player_bones.mp3"),this.load.audio("playerhurt","assets/SFX/Barry/Player_hurt_2.mp3"),this.load.audio("headstart_start","assets/new/audio/headstart_start.mp3"),this.load.audio("headstart_stop","assets/new/audio/headstart_stop.mp3"),this.load.audio("headstart_mid","assets/new/audio/headstart_build.mp3"),this.load.audio("headstart_lp","assets/new/audio/headstart_lp.mp3"),this.load.audio("rocketwarning","assets/SFX/Obstacle/Missile/missile_warning.mp3"),this.load.audio("rocketlaunch","assets/SFX/Obstacle/Missile/missile_launch.mp3"),this.load.audio("rocketexplode","assets/SFX/Obstacle/Missile/rocket_explode_1.mp3"),this.load.audio("hit","assets/new/audio/pickupShieldHit.mp3")}LoadUpgradeComponents(){this.load.spritesheet("gravitysuit","assets/new_feature/vehicleGravitysuit.png",{frameWidth:42,frameHeight:42});for(var e=1;e<7;e++)this.load.image(`gs_frag${e}`,`assets/new_feature/fragment gravity suit/gravitysuitfrag${e}.png`);this.load.image("gs_head","assets/new_feature/fragment gravity suit/gs_head.png"),this.load.image("gs_head","assets/new_feature/fragment gravity suit/gs_body.png")}LoadParticle(){this.load.image("dust","assets/particles/dust.png"),this.load.spritesheet("rocketfire","assets/Obstacles/Missile/missileEffects.png",{frameWidth:64,frameHeight:64}),this.load.spritesheet("speedup","assets/new/spdup.png",{frameWidth:128,frameHeight:128})}}class Y extends i.Scene{constructor(){super("MainMenu"),t(this,"background"),t(this,"logo"),t(this,"title")}preload(){this.load.image("splash","assets/Splash/loading_screen.png")}create(){const{width:e,height:t}=this.scale;this.background=this.add.image(e/2,t/2,"splash");const s=this.background.width,i=this.background.height,a=this.scale.width/s,r=this.scale.height/i,h=Math.max(a,r);this.background.setScale(h),this.background.setScrollFactor(0),this.input.once("pointerdown",()=>{this.scene.start("GameScene")})}}class q extends i.Scene{constructor(){super("Preloader")}init(){this.add.rectangle(512,384,468,32).setStrokeStyle(1,16777215);const e=this.add.rectangle(282,384,4,28,16777215);this.load.on("progress",t=>{e.width=4+460*t})}preload(){this.load.setPath("assets"),this.load.image("logo","logo.png")}create(){r.init(),this.scene.start("MainMenu")}}const K={type:i.AUTO,width:screen.width,height:screen.height,parent:"game-container",backgroundColor:"#000000",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,height:800,width:1720},render:{antialias:!1,pixelArt:!0,roundPixels:!0},audio:{disableWebAudio:!1},scene:[a,q,Y,Z],physics:{default:"arcade",arcade:{gravity:{x:0,y:900}}}};document.addEventListener("DOMContentLoaded",()=>{new i.Game({...K,parent:"game-container"})});
